(this["webpackJsonpjetlink-institution"]=this["webpackJsonpjetlink-institution"]||[]).push([[0],{215:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(62),r=n.n(a),i=n(10),s=n(41),o=n(16),l=(n(202),n(9)),u=n(154),d=n(1);function j(e){e.redirectTo;var t=Object(u.a)(e,["redirectTo"]),n=Object(o.f)();return Object(c.useEffect)((function(){var e;return null!==(e=sessionStorage.getItem("login"))&&void 0!==e||n.push("/login"),function(){}}),[n]),Object(d.jsx)(o.b,Object(l.a)({},t))}var b=n(247),O=n(240),h=n(246),m=n(67);function p(e){var t=e.title,n=e.icon,c=(e.dest,e.color),a=Object(u.a)(e,["title","icon","dest","color"]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(O.a,Object(l.a)(Object(l.a)({fluid:!0,centered:!0,className:"featurecard",link:!0,color:c,raised:!0},a),{},{children:[Object(d.jsx)(h.a,{icon:!0,style:{fontSize:"1.125em",marginBottom:0,maxWidth:110},children:Object(d.jsx)(m.a,{name:null!==n&&void 0!==n?n:"image",color:c,style:{fontSize:"3em"}})}),Object(d.jsx)(O.a.Description,{children:Object(d.jsx)("span",{as:"h2",children:t||"<placeholder>"})})]}))})}var f="OPEN_MODAL",g="CLOSE_MODAL";function x(e){return{type:f,payload:e}}function v(e){return{type:g,payload:e}}var y={modalCategory:null,modalProps:null,modalResult:null,modalOpen:!1};var C="ASYNC_ACTION_START",I="ASYNC_ACTION_FINISH",k="ASYNC_ACTION_ERROR";function S(){return{type:C}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return{type:I,payload:e}}function w(e){return{type:k,payload:e}}var T={loading:!1,error:null};var L=n(31),E=n.n(L),P=n(50),R=n(87);n(217),n(211),n(213),n(218);R.a.initializeApp({apiKey:"AIzaSyBwuuYn5qexDHf-QZ0LXztU_mYJXQP3cCI",authDomain:"jetlink-dev.firebaseapp.com",projectId:"jetlink-dev",storageBucket:"jetlink-dev.appspot.com",messagingSenderId:"1038061766891",appId:"1:1038061766891:web:7f9829b930041ae79616ae",measurementId:"G-8CDW6YTSPK"}),R.a.firestore();(new R.a.auth.GoogleAuthProvider).setCustomParameters({prompt:"select_account"});var N=R.a,F=N.firestore();function U(e){if(e&&e.exists){var t=e.data();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&t[n]instanceof N.firestore.Timestamp&&(t[n]=t[n].toDate());return Object(l.a)(Object(l.a)({},t),{},{id:e.id})}}function D(e){return F.collection("users").doc(e.uid).set({displayName:e.displayName,email:e.email,photoURL:e.photoURL||null,createdAt:N.firestore.FieldValue.serverTimestamp()})}function _(e){return F.collection("institutions").where("domain","==",e.split("@")[1]).where("verifiedAdministrators","array-contains",e)}function B(e,t){return F.collection("institutions").doc(e).update(t)}function M(e){return F.collection("courses").doc(e)}function z(){return(z=Object(P.a)(E.a.mark((function e(t){var n,c,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=[]).push(F.batch()),c=0,a=0,t.forEach((function(e){498===c&&(c=0,a+=1,n.push(F.batch())),c+=1;var t=F.collection("courses_test").doc();n[a].set(t,e)})),n.forEach(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.commit();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return F.collection("terms").doc(e).update(t)}function H(e){return F.collection("institutions").doc(e)}function V(e){return F.collection("users").doc(e)}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,c=F.collection("tutorapp_test").where("institutionId","==",t).limit(n);switch(e){case 0:case"pending":return c.where("status","==",0);case 1:case"accepted":return c.where("status","==",1);case 2:case"rejected":return c.where("status","==",2);default:return c}}function K(){return(K=Object(P.a)(E.a.mark((function e(t,n){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=F.collection("courses").doc(t),e.next=3,c.set({users:N.firestore.FieldValue.arrayUnion(n)},{merge:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(P.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.collection("users").doc(n).update(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function J(e,t){var n,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=["userprofile","instlogo","instcover","tutorapp"];if(!a.includes(e))return Promise.reject({code:"invalid-args",message:"Invalid command"});var r="",i="",s="";switch(e){case"userprofile":r="users",i=null!==(n=N.auth().currentUser.uid)&&void 0!==n?n:null,s="profile/img";break;case"instlogo":r="institutions",i=c,s="logo/img";break;case"instcover":r="institutions",i=c,s="cover/img";break;case"tutorapp":r="application",i=c,s="transcript/pdf"}if(!r||!i||!s)return Promise.reject({code:"invalid-args",message:"Invalid command"});var o={customMetadata:{usecase:e}};return N.storage().ref("".concat(r,"/").concat(i,"/").concat(s)).put(t,o).then((function(t){console.log("----------------------- storageService.js --------------------------");var n=t.metadata.size,a=t.metadata.contentType,r=t.metadata.timeCreated;console.log("  size: ".concat(n)),console.log("  mimeType: ".concat(a)),console.log("  timeCreated: ".concat(r,"    ").concat(new Date(r),"    ").concat(new Date(r).toLocaleString())),"instlogo"===e?t.ref.getDownloadURL().then((function(e){B(c,{logoURL:e}).then((function(){console.log("update logo success")})),sessionStorage.setItem("logoURL",e)})):"instcover"===e&&t.ref.getDownloadURL().then((function(e){B(c,{coverPhotoURL:e}).then((function(){console.log("update cover photo success")})),sessionStorage.setItem("coverPhoto",e)}))}))}var q="LOADSETTING",Q="SETLOGO";var X={id:null,name:null,logosrc:null,location:null,academicAgreement:null,endUserAgreement:null};function Z(){return function(e){e(w()),e(S());try{H(sessionStorage.getItem("institutionId")).get().then((function(t){var n=U(t);e({type:q,payload:{academicAgreement:n.policies.academicIntegrityAgreement,endUserAgreement:n.policies.endUserAgreement}}),e(A())}))}catch(t){e(w({type:"getPolicies",msg:t}))}}}function $(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.institution})),n=t.academicAgreement,a=t.endUserAgreement;return Object(c.useEffect)((function(){return e(Z()),function(){}}),[e]),Object(d.jsx)("div",{className:"pagescontent",children:Object(d.jsx)(b.a,{verticalAlign:"middle",textAlign:"center",container:!0,stackable:!0,children:Object(d.jsxs)(b.a.Row,{children:[Object(d.jsx)(b.a.Column,{width:4,children:Object(d.jsx)(p,{title:"Institution Logo",icon:"address card",onClick:function(){return e(x({modalCategory:"EditSettingsModal",modalProps:{usecase:"instlogo"}}))},color:"green"})}),Object(d.jsx)(b.a.Column,{width:4,children:Object(d.jsx)(p,{title:"Institution Cover Photo",icon:"picture",onClick:function(){return e(x({modalCategory:"EditSettingsModal",modalProps:{usecase:"instcover"}}))},color:"red"})}),Object(d.jsx)(b.a.Column,{width:4,children:Object(d.jsx)(p,{title:"Academic Integrity Policy",icon:"graduation cap",onClick:function(){return e(x({modalCategory:"EditSettingsModal",modalProps:{usecase:"academicintegrity",data:n}}))},color:"blue"})}),Object(d.jsx)(b.a.Column,{width:4,children:Object(d.jsx)(p,{title:"End User Agreement",icon:"handshake outline",onClick:function(){return e(x({modalCategory:"EditSettingsModal",modalProps:{usecase:"enduseragreement",data:a}}))},color:"yellow"})})]})})})}function ee(){return Object(d.jsx)("div",{className:"pagescontent",children:Object(d.jsxs)(h.a,{as:"h2",textAlign:"center",children:[Object(d.jsx)(m.a,{size:"big",name:"user circle outline"}),sessionStorage.getItem("userName")]})})}var te=n(230),ne=n(181);function ce(){return Object(d.jsx)("div",{className:"pagescontent",children:Object(d.jsxs)(te.a,{children:[Object(d.jsx)(h.a,{as:"h1",textAlign:"center",children:"Manage Your SCuLi With Few Clicks"}),Object(d.jsx)(ne.a,{src:sessionStorage.getItem("coverURL"),size:"huge",centered:!0})]})})}var ae=n(248),re=n(235),ie=n(231),se=n(219),oe="CHECK_CRED",le="LOGIN_USER",ue="INIT_PROFILE",de="USER_INIT",je="LOGOUT_USER",be="SET_INSTITUTION";function Oe(){return(Oe=Object(P.a)(E.a.mark((function e(t,n){var c,a,r,i,s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"facebook"===t&&(r=new N.auth.FacebookAuthProvider),"google"===t&&(r=new N.auth.GoogleAuthProvider),e.next=4,N.auth().signInWithPopup(r);case 4:if((null===(i=e.sent)||void 0===i||null===(c=i.additionalUserInfo)||void 0===c?void 0:c.isNewUser)&&D(i.user),!(null===i||void 0===i||null===(a=i.additionalUserInfo)||void 0===a?void 0:a.profile.email)){e.next=17;break}return e.next=9,_(i.additionalUserInfo.profile.email).get();case 9:if(1===(s=e.sent).size){e.next=12;break}return e.abrupt("return",Promise.reject("name or email not match"));case 12:return o=[],s.forEach((function(e){o.push(U(e))})),e.abrupt("return",Promise.resolve({institution:o[0],user:{id:i.user.uid,displayName:i.user.displayName}}));case 17:return e.abrupt("return",Promise.reject("name or email not match"));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return N.auth().signOut(),sessionStorage.removeItem("login"),{type:je}}function me(){return function(e){return R.a.auth().onAuthStateChanged((function(t){t&&t.uid&&t.email&&t.displayName&&V(t.uid).onSnapshot((function(t){if(t&&t.exists){var n=U(t);e({type:ue,payload:n}),e({type:le})}}))}))}}function pe(){var e=Object(i.b)();function t(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(ae.a.Item,{position:"right",style:{marginLeft:12},children:[Object(d.jsx)(m.a,{size:"big",name:"user circle outline"}),Object(d.jsx)(re.a,{pointing:"top right",text:sessionStorage.getItem("userName"),children:Object(d.jsxs)(re.a.Menu,{children:[Object(d.jsx)(re.a.Item,{text:"Profile",icon:"user",as:s.b,to:"/app/profile"}),Object(d.jsx)(ie.a,{}),Object(d.jsx)(re.a.Item,{text:"Sign out",icon:"sign-out",as:se.a,onClick:function(){e(he())}})]})})]})})}return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(ae.a,{inverted:!0,fixed:"top",children:Object(d.jsxs)(te.a,{children:[Object(d.jsx)(ae.a.Item,{as:s.b,to:"/app/dashboard",header:!0,children:Object(d.jsx)(ne.a,{src:sessionStorage.getItem("logoURL"),circular:!0,size:"mini",style:{marginRight:6}})}),Object(d.jsx)(ae.a.Item,{as:s.c,to:"/app/settings",name:"Institution Settings"}),Object(d.jsx)(ae.a.Item,{as:s.c,to:"/app/courses",name:"Courses"}),Object(d.jsx)(ae.a.Item,{as:s.c,to:"/app/tutor-apps",name:"Tutor Apps"}),Object(d.jsx)(ae.a.Item,{as:s.c,to:"/app/reported-users",name:"Reported Users"}),Object(d.jsx)(ae.a.Item,{as:s.c,to:"/app/feedbacks",name:"Feedbacks"}),Object(d.jsx)(t,{})]})})})}function fe(e){var t=e.children,n=Object(i.c)((function(e){return e.auth})).logout,a=Object(o.f)();return Object(c.useEffect)((function(){return n&&a.push("/login"),function(){}}),[n,a]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{style:{height:"100vh",paddingTop:"0em"},children:[Object(d.jsx)("div",{className:"dashboard-header",children:Object(d.jsx)(pe,{})}),Object(d.jsx)("div",{className:"dashboard-content",children:t})]})})}n(215);var ge=n(249),xe=n(242),ve=n(238),ye=n(243),Ce=n(127),Ie="LOAD_TERM",ke="SELECT_TERM",Se="SEARCH_CHANGE",Ae="ADDCOURSE",we="UPLOAD_TERM",Te="UPLOAD_COURSE";function Le(e){return function(t){t(w()),t(S());try{H(e).get().then((function(e){var n,c=e.data(),a=c.currentTerm,r=[].concat(Object(Ce.a)(c.pastTerms),[a],Object(Ce.a)(c.futureTerms));(n=r,F.collection("terms").where(N.firestore.FieldPath.documentId(),"in",n)).get().then((function(e){var n=[];e.forEach((function(e){n.push(U(e))})),t({type:Ie,payload:{terms:n,selectedTerm:a}}),t(Ee(a,n.find((function(e){return e.id===a})))),t(A())}))}))}catch(n){t(w({type:"getTerms",msg:n}))}}}function Ee(e,t){return function(n){n(w()),n(S());try{(c=t.courses,F.collection("courses_test").where(N.firestore.FieldPath.documentId(),"in",c)).get().then((function(t){var c=[];t.forEach((function(e){c.push(U(e))})),n({type:ke,payload:{selectedTerm:e,courses:c}}),n({type:Ae,payload:!1}),n(A())}))}catch(a){n({type:ke,payload:{selectedTerm:e,courses:[]}}),n(w({type:"selectTerm",msg:a}))}var c}}function Pe(e,t,n,c){return function(a){""!==t?a({type:Se,payload:{courses:e,searchValue:t}}):a(Ee(n,c))}}function Re(e,t,n,c,a){return function(r){r(S()),r(w());try{(i={name:e,courseShortName:t,description:n},F.collection("courses_test").add(i)).then((function(e){a.courses.push(e.id),G(c,{courses:a.courses}).then((function(){r({type:Ae,payload:!1}),r(Ee(c,a)),r(A())}))}))}catch(s){r(w({type:"addCourseSubmit",msg:s}))}var i}}function Ne(e){return function(t){t(S());try{var n=[],c=new FileReader;c.onload=function(e){var c,a;c=e.target.result,function(e){return z.apply(this,arguments)}(n=JSON.parse(a).map((function(e){return{name:e.label,shortName:e.value,institutionId:c}}))).then((function(){t(A()),t({type:Te,payload:n.length})}))},c.readAsText(e)}catch(a){t(w(a))}}}function Fe(e,t,n){return function(c){c(S());try{var a=[],r=new FileReader;r.onload=function(t){var r;r=t.target.result,function(e,t){return F.collection("courses_test").where("institutionId","==",t).where("name","in",e)}(a=JSON.parse(r),e).get().then((function(e){var t=[];e.forEach((function(e){t.push(U(e).id)})),G(n,{courses:t}).then((function(){c({type:we,payload:a.length}),c(A())}))}))},r.readAsText(t)}catch(i){c(w(i))}}}function Ue(){var e=Object(i.c)((function(e){return e.course})),t=e.terms,n=e.selectedTerm,c=Object(i.c)((function(e){return e.async})).loading,a=Object(i.c)((function(e){return e.async.error})),r=Object(i.b)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h.a,{as:"h3",children:"Terms"}),c?Object(d.jsxs)(xe.a,{children:[Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{})]}):Object(d.jsx)(ve.a,{divided:!0,selection:!0,children:t&&t.map((function(e){return Object(d.jsx)(ve.a.Item,{onClick:function(){return r(Ee(e.id,e))},active:e.id===n,children:Object(d.jsx)(ve.a.Content,{children:e.name})},e.id)}))}),a&&"addCourseSubmit"===a.type&&Object(d.jsxs)(ye.a,{attached:"bottom",warning:!0,children:[Object(d.jsx)(m.a,{name:"info"}),a.msg]})]})}var De=n(26);function _e(e){var t=e.course,n=Object(i.b)(),c=Object(i.c)((function(e){return e.course})),a=c.selectedTerm,r=c.terms;return Object(d.jsxs)(ve.a.Item,{children:[Object(d.jsx)(ve.a.Content,{floated:"right",children:Object(d.jsx)(se.a,{onClick:function(){return n((e=t.id,c=a,i=r.find((function(e){return e.id===a})),function(t){t(w()),t(S());try{var n=i.courses.filter((function(t){return t!==e}));G(c,{courses:n}).then((function(){t(A()),t(Ee(c,i))}))}catch(a){t(w({type:"deleteCourse",msg:a}))}}));var e,c,i},children:"Delete"})}),Object(d.jsx)(ve.a.Content,{children:t.name})]})}var Be=n(251);function Me(){var e=Object(i.c)((function(e){return e.course})).courses,t=Object(i.c)((function(e){return e.async})).loading,n=Object(i.c)((function(e){return e.async.error})),a=Object(c.useState)(1),r=Object(De.a)(a,2),s=r[0],o=r[1];return Object(d.jsx)(d.Fragment,{children:t?Object(d.jsxs)(xe.a,{children:[Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ve.a,{divided:!0,verticalAlign:"middle",children:e&&e.slice(10*(s-1),10*s).map((function(e){return Object(d.jsx)(_e,{course:e},e.id)}))}),Object(d.jsx)(ie.a,{}),Object(d.jsx)(Be.a,{boundaryRange:0,defaultActivePage:1,ellipsisItem:null,firstItem:null,lastItem:null,siblingRange:4,totalPages:e?Math.ceil(e.length/10):1,onPageChange:function(e,t){var n=t.activePage;return o(n)}}),n&&"deleteCourse"===n.type&&Object(d.jsxs)(ye.a,{attached:"bottom",warning:!0,children:[Object(d.jsx)(m.a,{name:"info"}),n.msg]}),")"]})})}var ze=n(241),Ge=n(79),He=n(236);function Ve(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.course})),n=t.selectedTerm,a=t.terms,r=t.isaddCourse,s=Object(i.c)((function(e){return e.async.error})),o=Object(c.useState)(!1),l=Object(De.a)(o,2),u=l[0],j=l[1],b=Object(Ge.a)({initialValues:{name:"",shortName:"",description:""},onSubmit:function(t){e(Re(t.name,t.shortName,t.description,n,a.find((function(e){return e.id===n}))))}});return Object(d.jsxs)(ze.a,{children:[Object(d.jsxs)(ze.a.Title,{active:u,onClick:function(){j(!u)},children:[Object(d.jsx)(m.a,{name:"dropdown"}),"Add a course"]}),Object(d.jsxs)(ze.a.Content,{active:u,children:[Object(d.jsx)(se.a,{onClick:function(){return e((function(e){e({type:Ae,payload:!0})}))},children:"Add"}),r&&Object(d.jsxs)(He.a,{children:[Object(d.jsx)("label",{htmlFor:"courseName",children:"Course name"}),Object(d.jsx)(He.a.Field,{placeholder:"Intro to Cultural Anthropology",name:"name",control:"input",value:b.values.name,onChange:b.handleChange}),Object(d.jsx)("label",{htmlFor:"shortName",children:"Short name"}),Object(d.jsx)(He.a.Field,{name:"shortName",control:"input",placeholder:"ANTH 3",value:b.values.shortName,onChange:b.handleChange}),Object(d.jsx)("label",{htmlFor:"description",children:"Course description"}),Object(d.jsx)(He.a.Field,{control:"textarea",name:"description",value:b.values.description,onChange:b.handleChange}),Object(d.jsx)(se.a,{type:"submit",onClick:function(){e(Re(b.values.name,b.values.shortName,b.values.description,n,a.find((function(e){return e.id===n}))))},children:"Submit"})]}),s&&"addCourseSubmit"===s.type&&Object(d.jsxs)(ye.a,{attached:"bottom",warning:!0,children:[Object(d.jsx)(m.a,{name:"info"}),s.msg]})]})]})}var We=n(234);function Ke(){var e=Object(i.c)((function(e){return e.course})),t=e.courses,n=e.searchValue,c=e.selectedTerm,a=e.terms,r=Object(i.b)();return Object(d.jsx)(We.a,{onSearchChange:function(e,n){0===n.value.length&&r(Pe([],n.value,c,a.find((function(e){return e.id===c}))));var i=new RegExp(n.value);r(Pe(t.filter((function(e){return i.test(e.name.toLowerCase())})),n.value,c))},value:n,showNoResults:!1})}var Ye=n(128);function Je(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.async})).loading,n=Object(i.c)((function(e){return e.course})).selectedTerm,a=Object(c.useState)(""),r=Object(De.a)(a,2),s=r[0],o=r[1],l=Object(c.useState)(!1),u=Object(De.a)(l,2),j=u[0],b=u[1],O=Object(c.useState)(""),h=Object(De.a)(O,2),p=h[0],f=h[1],g=sessionStorage.getItem("institutionId");return Object(d.jsxs)(ze.a,{children:[Object(d.jsxs)(ze.a.Title,{active:j,onClick:function(){b(!j)},children:[Object(d.jsx)(m.a,{name:"dropdown"}),"Upload courses data"]}),Object(d.jsx)(ze.a.Content,{active:j,children:Object(d.jsxs)(He.a,{children:[Object(d.jsx)(Ye.a,{pointing:"below",children:"upload all courses data of your institution"}),Object(d.jsxs)(He.a.Group,{children:[Object(d.jsx)(He.a.Input,{width:"10",type:"file",onChange:function(e){o(e.target.files[0])}}),Object(d.jsx)(He.a.Button,{width:"4",type:"submit",loading:t,onClick:function(){e(Ne(s))},children:"Submit"})]}),Object(d.jsx)(Ye.a,{pointing:"below",children:"upload courses names in this term"}),Object(d.jsxs)(He.a.Group,{children:[Object(d.jsx)(He.a.Input,{width:"10",type:"file",onChange:function(e){return f(e.target.files[0])}}),Object(d.jsx)(He.a.Button,{width:"4",type:"submit",loading:t,onClick:function(){return e(Fe(g,p,n))},children:"Submit"})]})]})})]})}function qe(){var e=Object(i.b)(),t=sessionStorage.getItem("institutionId");return Object(c.useEffect)((function(){return e(Le(t)),function(){}}),[e,t]),Object(d.jsx)("div",{className:"pagescontent",children:Object(d.jsx)(ge.a,{children:Object(d.jsx)(b.a,{columns:3,children:Object(d.jsxs)(b.a.Row,{children:[Object(d.jsxs)(b.a.Column,{width:4,style:{margin:100},children:[Object(d.jsx)(ge.a,{children:Object(d.jsx)(Ue,{})}),Object(d.jsx)(ge.a,{color:"blue",children:Object(d.jsx)(Je,{})})]}),Object(d.jsxs)(b.a.Column,{width:7,children:[Object(d.jsx)(Ke,{}),Object(d.jsx)(ge.a,{color:"blue",size:"large",children:Object(d.jsx)(Me,{})}),Object(d.jsx)(ge.a,{children:Object(d.jsx)(Ve,{})})]})]})})})})}var Qe="LOAD_FEEDBACK",Xe="FEEDBACK_DETAIL",Ze="CHANGE_SORT",$e={loading:!1,selectedFeedback:null,feedbacks:[],sortBy:"time"};function et(e){return function(t){t(S());try{(function(e){return F.collection("feedback_test").where("institutionId","==",e).where("status","==",0)})(e).get().then((function(e){var n=[];e.forEach((function(e){return n.push(U(e))})),t({type:Qe,payload:{selectedFeedback:null,feedbacks:n}}),t(A()),n.length>0&&t(tt(n[0].id,n[0]))}))}catch(n){t(w({type:"loadFeedback",msg:n}))}}}function tt(e,t){return function(n){n(S());try{V(t.userId).get().then((function(c){var a=U(c);t.userName=a.displayName,n({type:Xe,payload:{selectedFeedback:e,feedback:t}}),n(A())}))}catch(c){n(w({type:"selectFeedback",msg:c}))}}}function nt(e){return function(t){t(S());try{n=e,c={status:1},F.collection("feedback_test").doc(n).update(c),A(),t(A())}catch(a){t(w({type:"solveFeedback",msg:a}))}var n,c}}function ct(e){var t=e.feedbacks,n=(e.selectedFeedback,Object(i.b)()),a=Object(i.c)((function(e){return e.async})).loading,r=Object(c.useState)(""),s=Object(De.a)(r,2),o=s[0],l=s[1];return Object(d.jsx)(d.Fragment,{children:a?Object(d.jsxs)(xe.a,{children:[Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{}),Object(d.jsx)(xe.a.Line,{})]}):Object(d.jsx)(ve.a,{divided:!0,selection:!0,children:0!==t.length&&t.map((function(e){return Object(d.jsx)(ve.a.Item,{active:e.id===o,onClick:function(){l(e.id),n(tt(e.id,e))},children:Object(d.jsx)(ve.a.Content,{children:e.title})},e.id)}))})})}function at(e){var t=e.feedback,n=Object(i.b)(),c=Object(i.c)((function(e){return e.async})).loading;return Object(d.jsx)(O.a,{fluid:!0,children:c||!t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(O.a.Content,{children:Object(d.jsx)(xe.a.Header,{length:"medium"})}),Object(d.jsx)(O.a.Content,{children:Object(d.jsx)(xe.a.Line,{length:"medium"})}),Object(d.jsx)(O.a.Content,{children:Object(d.jsx)(xe.a.Line,{length:"medium"})}),Object(d.jsx)(O.a.Content,{children:Object(d.jsx)(xe.a.Line,{length:"medium"})}),Object(d.jsx)(O.a.Content,{children:Object(d.jsx)(xe.a.Line,{length:"medium"})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(O.a.Content,{children:[Object(d.jsx)(O.a.Header,{children:t.title}),Object(d.jsx)(O.a.Meta,{children:"title"})]}),Object(d.jsxs)(O.a.Content,{children:[t.description,Object(d.jsx)(O.a.Meta,{children:"description"})]}),Object(d.jsxs)(O.a.Content,{children:[t.userName,Object(d.jsx)(O.a.Meta,{children:"user"})]}),Object(d.jsx)(O.a.Content,{children:Object(d.jsx)(O.a.Meta,{children:t.time.toString()})}),Object(d.jsx)(O.a.Content,{children:0===t.status?Object(d.jsx)(se.a,{basic:!0,floated:"right",onClick:function(){t.status=1,n(nt(t.id))},children:"Solved"}):Object(d.jsx)(se.a,{floated:"right",basic:!0,active:"false",children:Object(d.jsx)(m.a,{name:"checkmark"})})})]})})}function rt(){var e=Object(i.c)((function(e){return e.feedback})),t=e.selectedFeedback,n=e.feedbacks,a=e.sortBy,r=sessionStorage.getItem("institutionId"),s=Object(i.b)();Object(c.useEffect)((function(){return s(et(r)),function(){}}),[s,r]);var o=Object(c.useState)(1),l=Object(De.a)(o,2),u=l[0],j=l[1],O=Object(i.c)((function(e){return e.async.error}));return Object(d.jsx)("div",{className:"pagescontent",children:Object(d.jsx)(ge.a,{children:Object(d.jsxs)(te.a,{children:[Object(d.jsx)(h.a,{as:"h2",children:"manage feedbacks"}),Object(d.jsx)(ae.a,{attached:"top",borderless:!0,children:Object(d.jsx)(ae.a.Menu,{position:"right",children:Object(d.jsxs)("span",{children:["sorted by",Object(d.jsx)(re.a,{inline:!0,options:[{key:"time",value:"time",text:"last submit time"},{key:"title",value:"title",text:"title"}],onChange:function(e,t){var c=t.value;return s(function(e,t){return function(n){var c={sortBy:0};switch(e){case"time":t.sort((function(e,t){return e.time.getTime()-t.time.getTime()})),c.sortBy="time";break;case"title":t.sort((function(e,t){return e.title>t.title?1:-1})),c.sortBy="title";break;default:c.sortBy="time"}n({type:Ze,payload:c})}}(c,n))},selection:!0,defaultValue:a})]})})}),Object(d.jsxs)(ge.a,{children:[Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.a.Column,{width:5,children:Object(d.jsx)(ct,{feedbacks:n.slice(10*(u-1),10*u),selectedFeedback:t})}),t&&Object(d.jsx)(b.a.Column,{width:5,children:Object(d.jsx)(at,{feedback:n.find((function(e){return e.id===t}))})})]}),O&&("loadFeedback"===O.type||"selectFeedback"===O.type||"solveFeedback"===O.type)&&Object(d.jsxs)(ye.a,{attached:"bottom",warning:!0,children:[Object(d.jsx)(m.a,{name:"info"}),O.msg]})]}),Object(d.jsx)(Be.a,{attached:"bottom",boundaryRange:0,defaultActivePage:1,ellipsisItem:null,firstItem:null,lastItem:null,siblingRange:2,totalPages:Math.ceil(n.length/10),onPageChange:function(e,t){var n=t.activePage;return j(n)}})]})})})}var it="FETCH_REPORTS",st="CHANGE_SORT",ot="RELOAD",lt="LOADDRAFT",ut={reports:[],sessionInfo:null,sortBy:"time",reload:0,emailDraft:null};function dt(e){return function(t){t(S());try{(n=e,F.collection("incident_test").where("institutionId","==",n).where("status","==",0)).get().then((function(e){var n=[];e.forEach((function(e){var t=U(e);t.emailSent=!1,n.push(t)})),t({type:it,payload:{reports:n}}),t(A())}))}catch(c){t(w({type:"fetchReports",msg:c}))}var n}}function jt(e){return function(t){t(S());try{(n=e,c={status:1},F.collection("incident_test").doc(n).update(c)).then((function(){t(A())}))}catch(a){t(w({type:"solvedReport",msg:a}))}var n,c}}function bt(e){var t=e.reports,n=e.institutionId,a=Object(i.c)((function(e){return e.incident})),r=a.reload,s=a.emailDraft,o=Object(i.c)((function(e){return e.async})).loading,l=Object(i.b)(),u=Object(i.c)((function(e){return e.async.error})),j=Object(c.useState)(1),p=Object(De.a)(j,2),f=p[0],g=p[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b.a,{columns:3,children:t.slice(6*(f-1),6*f).map((function(e){return e&&Object(d.jsx)(b.a.Column,{children:Object(d.jsx)(O.a,{children:o?Object(d.jsxs)(xe.a,{children:[Object(d.jsx)(xe.a.Line,{length:"medium"}),Object(d.jsx)(xe.a.Line,{length:"medium"}),Object(d.jsx)(xe.a.Line,{length:"medium"}),Object(d.jsx)(xe.a.Line,{length:"medium"}),Object(d.jsx)(xe.a.Line,{length:"medium"}),Object(d.jsx)(xe.a.Line,{length:"medium"}),Object(d.jsx)(xe.a.Line,{length:"medium"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(O.a.Content,{children:[Object(d.jsxs)(O.a.Header,{children:[e.reportedUserName," "]}),Object(d.jsx)(O.a.Meta,{children:"reported user"}),e.emailSent?Object(d.jsx)(se.a,{floated:"left",basic:!0,active:"false",children:Object(d.jsx)(m.a,{name:"checkmark"})}):Object(d.jsx)(se.a,{basic:!0,floated:"left",onClick:function(){l(x({modalCategory:"SendEmailModal",modalProps:{emailDraft:s,incident:e,institutionId:n,officialEmail:"sculink@gmail.com"}})),console.log(r)},children:"notificate"})]}),Object(d.jsxs)(O.a.Content,{children:[Object(d.jsx)(O.a.Header,{children:e.userName}),Object(d.jsx)(O.a.Meta,{children:"submit user"})]}),Object(d.jsxs)(O.a.Content,{children:[Object(d.jsx)(ze.a,{as:O.a.Content,panels:[{key:e.id,title:e.description.substring(0,30).padEnd(35,"..."),content:e.description}]}),Object(d.jsx)(O.a.Meta,{children:"description"})]}),Object(d.jsx)(O.a.Content,{children:Object(d.jsx)(O.a.Meta,{children:e.time.toDateString()})}),Object(d.jsx)(O.a.Content,{children:0===e.status?Object(d.jsx)(se.a,{basic:!0,floated:"right",onClick:function(){e.status=1,l(jt(e.id))},children:"Solved"}):Object(d.jsx)(se.a,{floated:"right",basic:!0,active:"false",children:Object(d.jsx)(m.a,{name:"checkmark"})})}),Object(d.jsx)(O.a.Content,{})]})})},e.id)}))}),u&&("addCourseSubmit"===u.type||"fetchReports"===u.type)&&Object(d.jsxs)(ye.a,{attached:"bottom",warning:!0,children:[Object(d.jsx)(m.a,{name:"info"}),u.msg]}),Object(d.jsx)(ie.a,{horizontal:!0,children:Object(d.jsx)(h.a,{as:"h4",children:"pages"})}),Object(d.jsx)(Be.a,{boundaryRange:0,defaultActivePage:1,ellipsisItem:null,firstItem:null,lastItem:null,siblingRange:2,totalPages:Math.ceil(t.length/6),onPageChange:function(e,t){var n=t.activePage;return g(n)}})]})}function Ot(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.incident})),n=t.reports,a=t.sortBy,r=sessionStorage.getItem("institutionId");return Object(c.useEffect)((function(){return e(dt(r)),e(function(e){return function(t){t(S());try{H(e).get().then((function(e){var n=U(e);t({type:lt,payload:{emailDraft:n.emailDraft}}),t(A())}))}catch(n){t(w({type:"loadEmailDraft",msg:n}))}}}(r)),function(){}}),[e,r]),Object(d.jsx)("div",{className:"pagescontent",children:Object(d.jsx)(ge.a,{children:Object(d.jsxs)(te.a,{children:[Object(d.jsx)(h.a,{as:"h2",children:"manage reported users"}),Object(d.jsx)(ae.a,{attached:"top",borderless:!0,children:Object(d.jsx)(ae.a.Menu,{position:"right",children:Object(d.jsxs)("span",{children:[" ","sorted by",Object(d.jsx)(re.a,{inline:!0,options:[{key:"time",value:"time",text:"last submit time"},{key:"nameA",value:"nameA",text:"user name"},{key:"nameB",value:"nameB",text:"reported user name"}],onChange:function(t,c){var a=c.value;return e(function(e,t){return function(n){var c={sortBy:0};switch(e){case"time":t.sort((function(e,t){return e.time.getTime()-t.time.getTime()})),c.sortBy="time";break;case"nameA":t.sort((function(e,t){return e.userName>t.userName?1:-1})),c.sortBy="nameA";break;case"nameB":t.sort((function(e,t){return e.reportedUserName>t.reportedUserName?1:-1})),c.sortBy="nameB";break;default:c.sortBy="time"}n({type:st,payload:c})}}(a,n))},selection:!0,defaultValue:a})]})})}),Object(d.jsx)(ge.a,{children:Object(d.jsx)(bt,{reports:n,institutionId:r})})]})})})}var ht=n(244),mt=n(233);function pt(e){var t=e.history,n=Object(i.b)(),a=Object(c.useState)(!1),r=Object(De.a)(a,2),s=r[0],o=r[1],l=Object(c.useState)(null),u=Object(De.a)(l,2),j=u[0],O=u[1],p=Object(i.c)((function(e){return e.auth})).statusMessage;function f(e){n(S()),O(null),o(!0),n({type:oe,payload:null}),function(e,t){return Oe.apply(this,arguments)}(e).then((function(e){o(!1),sessionStorage.setItem("institutionId",e.institution.id),sessionStorage.setItem("institutionName",e.institution.name),sessionStorage.setItem("logoURL",e.institution.logoURL),sessionStorage.setItem("coverURL",e.institution.coverPhotoURL),sessionStorage.setItem("userId",e.user.id),sessionStorage.setItem("userName",e.user.displayName),sessionStorage.setItem("login","true"),t.push("/app/dashboard"),n(A())})).catch((function(e){O(e),o(!1),n(w(e))}))}return Object(d.jsx)("div",{children:Object(d.jsxs)(ht.a.Dimmable,{as:ge.a,dimmed:s,children:[Object(d.jsx)(b.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(d.jsxs)(b.a.Column,{style:{maxWidth:450},children:[Object(d.jsxs)(h.a,{as:"h3",color:"teal",textAlign:"center",children:[Object(d.jsx)(ne.a,{src:"/assets/logosculi.png",style:{width:300}}),Object(d.jsx)("p",{children:"Institutional Login"})]}),Object(d.jsx)(He.a,{size:"large",children:Object(d.jsx)(ge.a,{stacked:!0,children:Object(d.jsx)(He.a.Button,{onClick:function(){f("google")},icon:"google",fluid:!0,color:"google plus",content:"Login with Google"})})}),null!==j&&!s&&Object(d.jsxs)(ye.a,{attached:"bottom",warning:!0,children:[Object(d.jsx)(m.a,{name:"info"}),j]})]})}),Object(d.jsx)(ht.a,{active:s&&p&&!0,inverted:!0,children:Object(d.jsx)(mt.a,{inverted:!0,children:p})})]})})}var ft=n(176),gt="LOAD_TUTORAPP",xt="FEEDBACK_DETAIL",vt="CHANGE_SORT",yt={loading:!1,selectedTutorApp:null,tutorapps:[],sortBy:"time"};function Ct(e,t){return It.apply(this,arguments)}function It(){return(It=Object(P.a)(E.a.mark((function e(t,n){var c,a,r,i,s,o,l,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(S()),e.prev=1,e.next=4,W(0,t,500).get();case 4:c=e.sent,a=[],r=Object(ft.a)(c.docs),e.prev=7,r.s();case 9:if((i=r.n()).done){e.next=20;break}return s=i.value,o=U(s),e.next=14,M(o.courseId).get();case 14:l=e.sent,u=U(l),o.courseName=u.name,a.push(o);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(7),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:return n({type:gt,payload:{selectedTutorApp:null,applications:a}}),n(A()),e.abrupt("return",Promise.resolve());case 34:return e.prev=34,e.t1=e.catch(1),n(w({type:"loadTutorApps",msg:e.t1})),e.abrupt("return",Promise.reject());case 38:case"end":return e.stop()}}),e,null,[[1,34],[7,22,25,28]])})))).apply(this,arguments)}function kt(e,t){return function(n){n(S());try{(c=e.id,a={status:t},F.collection("tutorapp_test").doc(c).update(a)).then((function(){1===t?function(e,t){return K.apply(this,arguments)}(e.courseId,e.userId).then((function(t){V(e.userId).get().then((function(t){var c=U(t);(function(e,t){return Y.apply(this,arguments)})({courses:{student:c.courses.student,tutor:[].concat(Object(Ce.a)(c.courses.tutor),[e.courseId])}},e.userId).then((function(){Ct(sessionStorage.getItem("institutionId"),n),A(),n(A())}))}))})):(A(),n(A()))}))}catch(r){n(w({type:"solvedApplications",msg:r}))}var c,a}}function St(e){var t=e.tutorapp,n=Object(i.b)();return Object(d.jsx)(b.a,{row:1,columns:5,children:Object(d.jsxs)(b.a.Row,{children:[Object(d.jsx)(b.a.Column,{children:Object(d.jsx)(ve.a,{link:!0,children:Object(d.jsx)(ve.a.Item,{children:Object(d.jsx)(se.a,{basic:!0,href:t.transcriptURL,target:"_blank",rel:"noopener noreferrer",children:"View Transcript"})})})}),Object(d.jsx)(b.a.Column,{children:Object(d.jsx)(ve.a.Item,{children:Object(d.jsx)(ve.a.Content,{children:t.userName})})}),Object(d.jsx)(b.a.Column,{children:Object(d.jsx)(ve.a.Item,{children:Object(d.jsx)(ve.a.Content,{children:t.courseName})})}),Object(d.jsx)(b.a.Column,{children:Object(d.jsx)(ve.a.Item,{children:Object(d.jsxs)(ve.a.Content,{children:[Object(d.jsx)(se.a,{basic:!0,onClick:function(){n(kt(t,1))},children:"Approve"}),Object(d.jsx)(se.a,{basic:!0,onClick:function(){n(kt(t,2))},children:"Reject"})]})})}),Object(d.jsx)(b.a.Column,{children:Object(d.jsx)(ve.a.Item,{children:Object(d.jsx)(ve.a.Content,{children:t.time.toDateString()})})})]})})}function At(e){var t=e.tutorapps,n=Object(c.useState)(1),a=Object(De.a)(n,2),r=a[0],i=a[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ve.a,{divided:!0,verticalAlign:"middle",children:t&&t.slice(10*(r-1),10*r).map((function(e){return Object(d.jsx)(St,{tutorapp:e},e.id)}))}),Object(d.jsx)(ie.a,{}),Object(d.jsx)(Be.a,{boundaryRange:0,defaultActivePage:1,ellipsisItem:null,firstItem:null,lastItem:null,siblingRange:4,totalPages:3,onPageChange:function(e,t){var n=t.activePage;return i(n)}})]})}function wt(){var e=sessionStorage.getItem("institutionId"),t=Object(i.b)(),n=Object(i.c)((function(e){return e.tutorApp})),a=n.tutorapps,r=n.sortBy;return Object(c.useEffect)((function(){return Ct(e,t),function(){}}),[t,e]),Object(d.jsxs)("div",{className:"pagescontent",children:[Object(d.jsx)(h.a,{as:"h2",children:"manage tutor applications"}),Object(d.jsx)(ae.a,{attached:"top",borderless:!0,children:Object(d.jsx)(ae.a.Menu,{position:"right",children:Object(d.jsxs)("span",{children:["sorted by",Object(d.jsx)(re.a,{inline:!0,options:[{key:"time",value:"time",text:"last submit time"},{key:"user",value:"user",text:"user"}],onChange:function(e,n){var c,r,i=n.value;return t((c=i,r=a,function(e){var t={sortBy:0};switch(c){case"time":r.sort((function(e,t){return e.time.getTime()-t.time.getTime()})),t.sortBy="time";break;case"user":r.sort((function(e,t){return e.userName>t.userName?1:-1})),t.sortBy="user";break;default:t.sortBy="time"}e({type:vt,payload:t})}))},selection:!0,defaultValue:r})]})})}),Object(d.jsx)(ge.a,{children:Object(d.jsx)(b.a,{children:Object(d.jsx)(b.a.Row,{children:Object(d.jsx)(b.a.Column,{children:Object(d.jsx)(ge.a,{color:"blue",size:"large",children:Object(d.jsx)(At,{tutorapps:a})})})})})})]})}var Tt=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(j,{path:"/app",children:[Object(d.jsxs)(fe,{children:[Object(d.jsx)(o.b,{exact:!0,path:"/app/dashboard",component:ce}),Object(d.jsx)(o.b,{exact:!0,path:"/app/profile",component:ee}),Object(d.jsx)(o.b,{exact:!0,path:"/app/courses",component:qe}),Object(d.jsx)(o.b,{exact:!0,path:"/app/tutor-apps",component:wt}),Object(d.jsx)(o.b,{exact:!0,path:"/app/feedbacks",component:rt}),Object(d.jsx)(o.b,{exact:!0,path:"/app/reported-users",component:Ot}),Object(d.jsx)(o.b,{exact:!0,path:"/app/settings",component:$})]}),Object(d.jsx)(o.a,{from:"/app",to:"/app/dashboard"})]}),Object(d.jsx)(o.b,{path:"/login",component:pt})]})},Lt=n(70),Et=n(177),Pt={selectedTerm:null,terms:null,courses:null,loading:!1,isaddCourse:!1,searchValue:"",alCoursesInfo:"",termCoursesInfo:""};var Rt={authenticated:!1,currentUser:null,userProfile:null,initialized:!1,currentInstitution:null,statusMessage:null,logout:!1};var Nt="SET_FILE",Ft="FILE_UPLOAD",Ut="UPLOAD_PROGRESS",Dt="UPLOAD_COMPLETE",_t="UPLOAD_ERROR";function Bt(e){return{type:Nt,payload:e}}var Mt={file:null,usecase:null,loading:!1,progress:0,error:null,downloadURL:null};var zt=Object(Lt.combineReducers)({async:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case C:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,error:null});case I:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:null});case k:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:c});default:return Object(l.a)({},e)}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case f:return Object(l.a)(Object(l.a)(Object(l.a)({},e),c),{},{modalProps:Object(l.a)(Object(l.a)({},e.modalProps),c.modalProps),modalOpen:!0});case g:return Object(l.a)(Object(l.a)(Object(l.a)({},e),c),{},{modalCategory:null,modalProps:null,modalStartWith:null,modalResult:c,modalOpen:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case oe:return Object(l.a)(Object(l.a)({},e),{},{statusMessage:"Authenticating..."});case le:return Object(l.a)(Object(l.a)({},e),{},{logout:!1});case ue:var a,r,i;return c?Object(l.a)(Object(l.a)({},e),{},{userProfile:{uid:e.uid,displayName:c.displayName,email:c.email,isAdministrator:!0===c.isAdministrator,institution:{id:null===(a=c.institution)||void 0===a?void 0:a.id,name:null===(r=c.institution)||void 0===r?void 0:r.name,photoURL:null===(i=c.institution)||void 0===i?void 0:i.photoURL}},initialized:!0}):e;case de:return Object(l.a)(Object(l.a)({},e),{},{initialized:!0,statusMessage:null});case je:return Object(l.a)(Object(l.a)({},e),{},{logout:!0});case be:return Object(l.a)(Object(l.a)({},e),{},{currentInstitution:c});default:return e}},storage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case Nt:return c&&c.file&&c.usecase?Object(l.a)(Object(l.a)({},e),{},{file:c.file,usecase:c.usecase}):Mt;case Ft:return c&&c.file&&c.usecase?Object(l.a)(Object(l.a)({},e),{},{file:c.file,usecase:c.usecase,loading:!0,progress:0}):Object(l.a)(Object(l.a)(Object(l.a)({},e),c),{},{loading:!1,error:{code:"invalid-args",message:"No file selected"}});case Ut:return Object(l.a)(Object(l.a)({},e),{},{progress:null===c||void 0===c?void 0:c.progress});case Dt:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,downloadURL:null===c||void 0===c?void 0:c.downloadURL});case _t:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:null===c||void 0===c?void 0:c.error});default:return e}},institution:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case q:return Object(l.a)(Object(l.a)({},e),{},{academicAgreement:c.academicAgreement,endUserAgreement:c.endUserAgreement});case Q:return Object(l.a)(Object(l.a)({},e),{},{logosrc:c});default:return e}},feedback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case Qe:return Object(l.a)(Object(l.a)({},e),{},{selectedFeedback:c.selectedFeedback,feedbacks:c.feedbacks});case Xe:return Object(l.a)(Object(l.a)({},e),{},{selectedFeedback:c.selectedFeedback});case Ze:return Object(l.a)(Object(l.a)({},e),{},{sortBy:c.sortBy});default:return e}},incident:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case it:return Object(l.a)(Object(l.a)({},e),{},{reports:c.reports});case st:return Object(l.a)(Object(l.a)({},e),{},{sortBy:c.sortBy});case ot:return Object(l.a)(Object(l.a)({},e),{},{reload:e.reload+1});case lt:return Object(l.a)(Object(l.a)({},e),{},{emailDraft:c.emailDraft});default:return e}},course:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case Ie:return Object(l.a)(Object(l.a)({},e),{},{selectedTerm:c.selectedTerm,terms:c.terms});case ke:return Object(l.a)(Object(l.a)({},e),{},{selectedTerm:c.selectedTerm,courses:c.courses,searchValue:""});case Ae:return Object(l.a)(Object(l.a)({},e),{},{isaddCourse:c});case Se:return Object(l.a)(Object(l.a)({},e),{},{courses:c.courses,searchValue:c.searchValue});case Te:return Object(l.a)(Object(l.a)({},e),{},{alCoursesInfo:c});case we:return Object(l.a)(Object(l.a)({},e),{},{termCoursesInfo:c});default:return e}},tutorApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case gt:return Object(l.a)(Object(l.a)({},e),{},{selectedTutorApp:c.selectedTutorApp,tutorapps:c.applications});case xt:return Object(l.a)(Object(l.a)({},e),{},{selectedTutorApp:c.selectedTutorApp});case vt:return Object(l.a)(Object(l.a)({},e),{},{sortBy:c.sortBy});default:return e}}}),Gt=n(178);var Ht=n(239);function Vt(e){var t,n,c=e.children,a=(e.header,e.initValue,e.handleClose,e.handleSubmit,e.props),r=Object(i.b)();return Object(d.jsx)(Ht.a,Object(l.a)(Object(l.a)({open:!0,className:null!==(t=null===a||void 0===a?void 0:a.className)&&void 0!==t?t:"edit-settings-modal",size:null!==(n=null===a||void 0===a?void 0:a.size)&&void 0!==n?n:"large",onClose:function(e){return r(v({res:e}))}},a),{},{children:c||Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ht.a.Header,{children:"Confirm"}),Object(d.jsx)(Ht.a.Content,{children:Object(d.jsx)("p",{children:"Press OK to continue"})}),Object(d.jsx)(Ht.a.Actions,{children:Object(d.jsx)(se.a,{basic:!0,inverted:!0,content:"OK",onClick:r(v())})})]})}))}function Wt(e){var t=e.startWith,n=Object(i.b)(),c=Object(Ge.a)({initialValues:{academicPolicy:t}});return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ht.a.Content,{scrolling:!0,children:Object(d.jsx)(He.a,{className:"ui form",children:Object(d.jsx)(He.a.Field,{control:"textarea",name:"academicPolicy",value:c.values.academicPolicy,onChange:c.handleChange})})}),Object(d.jsx)(Ht.a.Actions,{children:Object(d.jsx)(se.a.Group,{children:Object(d.jsx)(se.a,{color:"teal",content:"Update",onClick:function(){return n((e=c.values.academicPolicy,function(t){t(w()),t(S());try{B(sessionStorage.getItem("institutionId"),{"policies.academicIntegrityAgreement":e}),t(A()),t(Z())}catch(n){t(w({type:"uploadAcademic",msg:n}))}}));var e}})})})]})}function Kt(e){var t=e.startWith,n=Object(i.b)(),c=Object(Ge.a)({initialValues:{enduserPolicy:t}});return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ht.a.Content,{scrolling:!0,children:Object(d.jsx)(He.a,{className:"ui form",children:Object(d.jsx)(He.a.Field,{control:"textarea",name:"enduserPolicy",value:c.values.enduserPolicy,onChange:c.handleChange})})}),Object(d.jsx)(Ht.a.Actions,{children:Object(d.jsx)(se.a.Group,{children:Object(d.jsx)(se.a,{color:"teal",content:"Update",onClick:function(){return n((e=c.values.enduserPolicy,function(t){t(w()),t(S());try{B(sessionStorage.getItem("institutionId"),{"policies.endUserAgreement":e}),t(A()),t(Z())}catch(n){t(w({type:"uploadEndUser",msg:n}))}}));var e}})})})]})}var Yt=n(180);function Jt(e){var t=e.setFile,n={border:"dashed 3px #eee",borderRadius:"5%",paddingTop:"30px",paddingLeft:"6px",paddingRight:"6px",textAlign:"center",minWidth:"65%"},a=Object(c.useCallback)(t,[t]),r=Object(Yt.a)({onDrop:a}),i=r.getRootProps,s=r.getInputProps,o=r.isDragActive;return Object(d.jsxs)("div",Object(l.a)(Object(l.a)({},i()),{},{style:o?Object(l.a)(Object(l.a)({},n),{border:"dashed 3px green"}):n,children:[Object(d.jsx)("input",Object(l.a)({},s())),Object(d.jsx)(m.a,{name:"upload",size:"large"}),Object(d.jsx)(h.a,{style:{marginBottom:"1rem"},content:"Click or drop a file here"})]}))}function qt(e){var t=e.usecase,n=Object(i.b)(),c=Object(i.c)((function(e){return e.storage})).file;if(!t)return Object(d.jsx)(ye.a,{icon:"info",content:"Something went wrong"});return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.a.Row,{children:Object(d.jsx)(Jt,{setFile:function(e){if(e&&0!==e.length){var c=e[0];Object.assign(c,{preview:URL.createObjectURL(c)}),console.log("  PHOTO UPLOAD WIDGET: "),console.log(c),n(Bt({file:c,usecase:t}))}else console.log(" ~~ photo widget dropzone got NULL FILES LIST dropped in"),n(Bt(null))}})}),Object(d.jsx)(b.a.Row,{children:c&&Object(d.jsx)(ne.a,{size:"medium",src:c.preview,label:{as:"a",color:"teal",content:"Review",icon:"photo",ribbon:!0}})})]})})}function Qt(){var e=Object(i.c)((function(e){return e.storage})).file,t=Object(i.b)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ht.a.Content,{image:!0,scrolling:!0,children:Object(d.jsx)(qt,{usecase:"instlogo"})}),Object(d.jsx)(Ht.a.Actions,{children:Object(d.jsx)(se.a.Group,{children:Object(d.jsx)(se.a,{color:"teal",content:"Update",onClick:function(){return t(function(e){return function(t){t(w()),t(S());try{var n=sessionStorage.getItem("institutionId");J("instlogo",e,n),t(A())}catch(c){t(w({type:"uploadLogo",msg:c}))}}}(e))}})})})]})}function Xt(){var e=Object(i.c)((function(e){return e.storage})).file,t=Object(i.b)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ht.a.Content,{image:!0,scrolling:!0,children:Object(d.jsx)(qt,{usecase:"instcover"})}),Object(d.jsx)(Ht.a.Actions,{children:Object(d.jsx)(se.a.Group,{children:Object(d.jsx)(se.a,{color:"teal",content:"Update",onClick:function(){return t(function(e){return function(t){t(w()),t(S());try{var n=sessionStorage.getItem("institutionId");J("instcover",e,n),t(A())}catch(c){t(w({type:"uploadCover",msg:c}))}}}(e))}})})})]})}function Zt(e){var t=e.usecase,n=e.data,c=Object(i.b)(),a="academicintegrity"===t?"Academic Integrity Agreement":"enduseragreement"===t?"End-User Agreement":"instlogo"===t?"Institution Logo":"instcover"===t?"Institution Cover Photo":"default placeholder";return Object(d.jsxs)(Vt,{centered:!1,className:"edit-settings-modal",header:a,size:"large",children:[Object(d.jsxs)(Ht.a.Header,{children:["Edit ",a]}),"instlogo"===t&&Object(d.jsx)(Qt,{startWith:n}),"instcover"===t&&Object(d.jsx)(Xt,{startWith:n}),"academicintegrity"===t&&Object(d.jsx)(Wt,{startWith:n}),"enduseragreement"===t&&Object(d.jsx)(Kt,{startWith:n}),Object(d.jsx)(Ht.a.Actions,{children:Object(d.jsx)(se.a,{onClick:function(e){return c({event:e.type,name:"onClick",type:"CLOSE_MODAL"})},positive:!0,children:"Close"})})]})}function $t(e){var t=e.emailDraft,n=e.incident,c=e.institutionId,a=e.officialEmail,r=Object(i.b)(),s=Object(Ge.a)({initialValues:{draftSubject:t.subject,draftText:t.body}}),o=Object(i.c)((function(e){return e.async.error}));return Object(d.jsxs)(Vt,{centered:!1,header:"Send Notification Email ",size:"large",children:[Object(d.jsx)(Ht.a.Content,{scrolling:!0,children:Object(d.jsxs)(He.a,{children:[Object(d.jsxs)(He.a.Group,{widths:"equal",children:[Object(d.jsx)(He.a.Field,{control:"input",default:!0,name:"draftSubject",value:s.values.draftSubject,onChange:s.handleChange,label:"input subject of email"}),Object(d.jsx)(He.a.Field,{control:"textarea",default:!0,name:"draftText",value:s.values.draftText,onChange:s.handleChange,label:"input email body"})]}),Object(d.jsx)(se.a,{onClick:function(){r(function(e,t,n){return function(c){c(S());try{B(e,{emailDraft:{subject:n,body:t}}).then((function(){c({type:ot}),c(A())}))}catch(a){c(w({type:"saveEmailDraft",msg:a}))}}}(c,s.values.draftText,s.values.draftSubject))},children:"save as draft"}),o&&"saveEmailDraft"===o.type&&Object(d.jsx)(Ye.a,{color:"red",children:o.msg})]})}),Object(d.jsxs)(Ht.a.Actions,{children:[Object(d.jsx)(se.a,{onClick:function(){return r(v())},negative:!0,children:"Close"}),n.emailSent?Object(d.jsx)(se.a,{basic:!0,active:"false",children:Object(d.jsx)(m.a,{name:"checkmark"})}):Object(d.jsx)(se.a,{basic:!0,onClick:function(){r(function(e,t,n,c){return function(a){a(S());try{V(c.reportedUserId).get().then((function(r){var i=U(r);fetch("/sendEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:n,to:i.email,subject:e,body:t})}).then((function(e){e.json()})).then((function(e){a({type:ot}),a(A()),c.emailSent=!0,console.log("Success:",e)}))}))}catch(r){a(w({type:"sendEmail",msg:r}))}}}(s.values.draftSubject,s.values.draftText,a,n))},children:"Send"})]}),o&&"sendEmail"===o.type&&Object(d.jsxs)(ye.a,{attached:"bottom",warning:!0,children:[Object(d.jsx)(m.a,{name:"info"}),o.msg]})]})}function en(){var e={EditSettingsModal:Zt,SendEmailModal:$t},t=Object(i.c)((function(e){return e.modal})),n=t.modalCategory,c=t.modalProps,a=null;if(n){var r=e[n];a=Object(d.jsx)(r,Object(l.a)({},c))}return Object(d.jsx)("span",{children:a})}function tn(){var e=Object(o.g)().pathname;return Object(c.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var nn=function(){var e=Object(Lt.createStore)(zt,Object(Et.composeWithDevTools)(Object(Lt.applyMiddleware)(Gt.a)));return e.dispatch(me()),e}(),cn=document.getElementById("root");r.a.render(Object(d.jsx)(i.a,{store:nn,children:Object(d.jsxs)(s.a,{children:[Object(d.jsx)(tn,{}),Object(d.jsx)(en,{}),Object(d.jsx)(Tt,{})]})}),cn)}},[[216,1,2]]]);
//# sourceMappingURL=main.a022697e.chunk.js.map