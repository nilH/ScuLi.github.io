{"version":3,"sources":["app/common/AuthGuardedRoute.jsx","app/common/dashboard/DashboardFeatureCard.jsx","app/common/modals/modalReducer.js","app/async/asyncReducer.js","app/firestore/config/firebase.js","app/firestore/firestoreService.js","app/firestore/storageService.js","features/institution-settings/institutionReducer.js","features/institution-settings/settingsAction.js","features/institution-settings/InstitutionSettingsPage.jsx","features/user-profile/UserProfilePage.jsx","app/common/dashboard/DashboardHome.jsx","features/auth/authConstants.js","app/firestore/firebaseService.js","features/auth/authActions.js","app/common/dashboard/DashboardHeader.jsx","app/common/dashboard/DashboardPage.jsx","features/manage-courses/courseManageConstants.js","features/manage-courses/courseManageActions.js","features/manage-courses/TermsList.jsx","features/manage-courses/CourseListItem.jsx","features/manage-courses/CourseList.jsx","features/manage-courses/AddCourseForm.jsx","features/manage-courses/CourseSearchBar.jsx","features/manage-courses/UploadCoursesForm.jsx","features/manage-courses/ManageCoursePage.jsx","features/feedback/feedbackReducer.js","features/feedback/feedbackAction.js","features/feedback/FeedbackList.jsx","features/feedback/FeedbackDetail.jsx","features/feedback/FeedbackPage.jsx","features/reported-users/reportedUsersReducer.js","features/reported-users/reportedUserAction.js","features/reported-users/ReportedUsersList.jsx","features/reported-users/ReportedUsersPage.jsx","features/auth/LoginPage.jsx","features/tutor-applications/tutorAppReducer.js","features/tutor-applications/tutorAppAction.js","features/tutor-applications/TutorApplicationListItem.jsx","features/tutor-applications/TutorApplicationList.jsx","features/tutor-applications/TutorApplicationsPage.jsx","app/layout/App.jsx","features/manage-courses/courseManageReducer.js","features/auth/authReducer.js","app/store/storageReducer.js","app/store/rootReducer.js","app/common/modals/ModalWrapper.jsx","features/institution-settings/edit-settings-modal/EditAcademicIntegrityPolicyModalContent.jsx","features/institution-settings/edit-settings-modal/EditEndUserAgreementPolicyModalContent.jsx","app/common/photos/PhotoWidgetDropzone.jsx","app/common/photos/PhotoUploadWidget.jsx","features/institution-settings/edit-settings-modal/EditInstitutionLogoModalContent.jsx","features/institution-settings/edit-settings-modal/EditCoverModalContent.jsx","features/institution-settings/edit-settings-modal/EditSettingsModal.jsx","features/reported-users/SendEmailModal.jsx","app/common/modals/ModalManager.jsx","app/layout/ScrollToTop.jsx","index.js","app/store/configureStore.js"],"names":["AuthGuardedRoute","redirectTo","rest","history","useHistory","useEffect","sessionStorage","getItem","push","DashboardFeatureCard","title","icon","color","dest","Card","fluid","centered","className","link","raised","Header","style","fontSize","marginBottom","maxWidth","Icon","name","Description","as","OPEN_MODAL","CLOSE_MODAL","openModal","modal","type","payload","closeModal","result","initialState","modalCategory","modalProps","modalResult","modalOpen","ASYNC_ACTION_START","ASYNC_ACTION_FINISH","ASYNC_ACTION_ERROR","asyncActionStart","asyncActionFinish","undefined","asyncActionError","error","loading","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","GoogleAuthProvider","setCustomParameters","prompt","db","dataFromSnapshot","snapshot","exists","data","prop","Object","prototype","hasOwnProperty","call","Timestamp","toDate","id","setUserProfileData","user","collection","doc","uid","set","displayName","email","photoURL","createdAt","FieldValue","serverTimestamp","getInstitutionByEmployee","where","split","updateInstitutionFirestore","institutionId","item","update","getCourse","courseID","courses","a","batchArray","batch","opCounter","btIndex","forEach","course","docRef","commit","updateTerm","termID","term","getInstitutionDocRef","instId","getUserProfileDocRef","userId","fetchInstitutionTutorApps","filter","limit","tutorappsQueryRef","courseId","courseRef","users","arrayUnion","merge","patch","uploadToFirebaseStorage","usecase","file","validUsecases","includes","Promise","reject","code","message","root","path","target","currentUser","metadata","customMetadata","storage","ref","put","then","uploadTaskSnapshot","console","log","size","mimeType","contentType","timeCreated","Date","toLocaleString","getDownloadURL","url","logoURL","setItem","coverPhotoURL","LOADSETTING","SETLOGO","logosrc","location","academicAgreement","endUserAgreement","getPolicies","dispatch","get","institution","policies","academicIntegrityAgreement","msg","InstitutionSettingsPage","useDispatch","useSelector","state","Grid","verticalAlign","textAlign","container","stackable","Row","Column","width","onClick","UserProfilePage","DashboardHome","Container","Image","src","CHECK_CRED","LOGIN_USER","INIT_PROFILE","USER_INIT","LOGOUT_USER","SET_INSTI","selectedProvider","provider","FacebookAuthProvider","signInWithPopup","usercred","additionalUserInfo","isNewUser","profile","institutions","resolve","logoutUser","signOut","removeItem","listenAuthState","onAuthStateChanged","onSnapshot","DashboardHeader","HeaderActions","Menu","Item","position","marginLeft","Dropdown","pointing","text","Link","to","Divider","Button","inverted","fixed","header","circular","marginRight","NavLink","DashboardPage","children","logout","height","paddingTop","LOAD_TERM","SELECT_TERM","SEARCH_CHANGE","ADD_COURSE","UPLOAD_TERM","UPLOAD_COURSE","getTerms","institutionID","termIDs","curtermid","currentTerm","termIds","pastTerms","futureTerms","FieldPath","documentId","terms","selectedTerm","selectTerm","find","termid","courseIDs","searchCourse","results","searchValue","addCourseSubmit","shortName","description","courseShortName","add","uploadAlCourses","alCoursesFile","alCourses","readeralCourses","FileReader","onload","e","courseData","addCoursestoDatabase","JSON","parse","map","label","value","length","readAsText","uploadTermCourses","termFile","termCourses","readertermCourses","termData","names","getCoursesByName","coursesId","TermList","async","asyncError","Placeholder","Line","List","divided","selection","active","Content","Message","attached","warning","CourseListItem","floated","courseid","CourseList","useState","activePage","setactivePage","slice","Pagination","boundaryRange","defaultActivePage","ellipsisItem","firstItem","lastItem","siblingRange","totalPages","Math","ceil","onPageChange","AddCourseForm","isaddCourse","isExpanded","setExpanded","formik","useFormik","initialValues","onSubmit","values","Accordion","Title","Form","htmlFor","Field","placeholder","control","onChange","handleChange","CourseSearchBar","Search","onSearchChange","re","RegExp","test","toLowerCase","showNoResults","UploadCoursesForm","setalCoursesFile","settermFile","Label","Group","Input","files","ManageCoursePage","Segment","columns","margin","LOAD_FEEDBACK","SHOW_DETAIL","CHANGE_SORT","selectedFeedback","feedbacks","sortBy","loadFeedback","getFeedbacksByInstitution","selectFeedback","feedback","userName","solvedFeedback","feedbackID","status","FeedbackList","activeId","setActiveId","FeedbackDetail","Meta","time","toString","basic","FeedbackPage","borderless","inline","options","key","sortby","sort","b","getTime","changeSort","defaultValue","fb","FETCH_REPORTS","RELOAD","LOADDRAFT","reports","sessionInfo","reload","emailDraft","fetchReports","incidents","incident","emailSent","solvedReport","selectedReportID","incidentId","updates","ReportedUsersList","reportedUserName","officialEmail","panels","substring","padEnd","content","toDateString","horizontal","ReportedUsersPage","loadEmailDraft","LoginPage","submitting","setSubmitting","errorMsg","setErrorMsg","statusMessage","handleSocialLogin","providerStr","socialLogin","catch","err","Dimmer","Dimmable","dimmed","stacked","Loader","LOAD_TUTORAPP","selectedTutorApp","tutorapps","loadTutorApps","applications","docs","tutorapp","coursedoc","courseName","solvedApplications","option","addUserToCourse","userProfile","updateUserProfile","student","tutor","TutorApplicationListItem","row","href","transcriptURL","rel","TutorApplicationList","application","TutorApplicationsPage","tutorApp","App","exact","component","from","alCoursesInfo","termCoursesInfo","authenticated","initialized","currentInstitution","SET_FILE","FILE_UPLOAD","UPLOAD_PROGRESS","UPLOAD_COMPLETE","UPLOAD_ERROR","setFile","progress","downloadURL","rootReducer","combineReducers","modalStartWith","isAdministrator","ModalWrapper","props","initValue","handleClose","handleSubmit","Modal","open","onClose","res","Actions","EditAcademicIntegrityPolicyModalContent","startWith","academicPolicy","scrolling","EditEndUserAgreementPolicyModalContent","enduserPolicy","PhotoWidgetDropzone","dropzoneStyles","border","borderRadius","paddingLeft","paddingRight","minWidth","onDrop","useCallback","useDropzone","getRootProps","getInputProps","isDragActive","PhotoUploadWidget","assign","preview","URL","createObjectURL","ribbon","EditInstitutionLogoModalContent","image","optId","uploadLogo","EditCoverModalContent","uploadCover","EditSettingsModal","event","positive","SendEmailModal","draftSubject","subject","draftText","body","widths","default","saveEmailDraft","negative","reportedUserId","userdata","fetch","method","headers","stringify","response","json","sendEmail","ModalManager","modalLookup","renderedModal","ModalComponent","ScrollToTop","pathname","useLocation","window","scrollTo","store","createStore","composeWithDevTools","applyMiddleware","thunk","configureStore","rootEl","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.a022697e.chunk.js","sourcesContent":["import React,{useEffect} from \"react\";\r\nimport {  Route } from \"react-router\";\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nexport default function AuthGuardedRoute({\r\n  redirectTo = \"/login\",\r\n  ...rest\r\n}) {\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    sessionStorage.getItem(\"login\")??history.push(\"/login\")\r\n    return () => {};\r\n  }, [history]);\r\n\r\n  \r\n  return <Route {...rest} />;\r\n}\r\n","import React from 'react';\r\nimport { Card, Header, Icon } from 'semantic-ui-react';\r\n\r\nexport default function DashboardFeatureCard({\r\n  title,\r\n  icon,\r\n  dest,\r\n  color,\r\n  ...rest\r\n}) {\r\n  return (\r\n    <>\r\n      <Card\r\n        fluid\r\n        centered\r\n        className='featurecard'\r\n        link\r\n        color={color}\r\n        raised\r\n        {...rest}>\r\n        <Header\r\n          icon\r\n          style={{ fontSize: '1.125em', marginBottom: 0, maxWidth: 110 }}>\r\n          <Icon\r\n            name={icon ?? 'image'}\r\n            color={color}\r\n            style={{ fontSize: '3em' }}\r\n          />\r\n        </Header>\r\n        <Card.Description>\r\n          <span as='h2'>{title ? title : '<placeholder>'}</span>\r\n        </Card.Description>\r\n      </Card>\r\n    </>\r\n  );\r\n}\r\n","const OPEN_MODAL = 'OPEN_MODAL';\r\nconst CLOSE_MODAL = 'CLOSE_MODAL';\r\n\r\nexport function openModal(modal) {\r\n  return {\r\n    type: OPEN_MODAL,\r\n    payload: modal,\r\n  };\r\n}\r\n\r\nexport function closeModal(result) {\r\n  return {\r\n    type: CLOSE_MODAL,\r\n    payload: result,\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  modalCategory: null,\r\n  modalProps: null, /* {\r\n    usecase: null,\r\n    initData: null,\r\n  }  */\r\n  modalResult: null,\r\n  modalOpen: false,\r\n};\r\n\r\nexport default function modalReducer(state = initialState, { type, payload }) {\r\n\r\n  switch (type) {\r\n    case OPEN_MODAL:\r\n      return {\r\n        ...state,\r\n        ...payload,\r\n        modalProps: {\r\n          ...state.modalProps,\r\n          ...payload.modalProps\r\n        },\r\n        modalOpen: true\r\n      };\r\n    case CLOSE_MODAL:\r\n      return {\r\n        ...state,\r\n        ...payload,\r\n        modalCategory: null,\r\n        modalProps: null,\r\n        modalStartWith: null,\r\n        modalResult: payload,\r\n        modalOpen: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","const ASYNC_ACTION_START = 'ASYNC_ACTION_START';\r\nconst ASYNC_ACTION_FINISH = 'ASYNC_ACTION_FINISH';\r\nconst ASYNC_ACTION_ERROR = 'ASYNC_ACTION_ERROR';\r\n\r\nexport function asyncActionStart() {\r\n  return {\r\n    type: ASYNC_ACTION_START,\r\n  };\r\n}\r\n\r\nexport function asyncActionFinish(result = undefined) {\r\n  return {\r\n    type: ASYNC_ACTION_FINISH,\r\n    payload: result,\r\n  };\r\n}\r\n\r\nexport function asyncActionError(error) {\r\n  return {\r\n    type: ASYNC_ACTION_ERROR,\r\n    payload: error,\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nexport default function asyncReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case ASYNC_ACTION_START:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: null,\r\n      };\r\n    case ASYNC_ACTION_FINISH:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case ASYNC_ACTION_ERROR:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: payload,\r\n      };\r\n    default:\r\n      return {\r\n        ...state,\r\n      };\r\n  }\r\n}\r\n","import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/database';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\nconst firebaseConfig = {\r\n  apiKey: 'AIzaSyBwuuYn5qexDHf-QZ0LXztU_mYJXQP3cCI',\r\n  authDomain: 'jetlink-dev.firebaseapp.com',\r\n  projectId: 'jetlink-dev',\r\n  storageBucket: 'jetlink-dev.appspot.com',\r\n  messagingSenderId: '1038061766891',\r\n  appId: '1:1038061766891:web:7f9829b930041ae79616ae',\r\n  measurementId: 'G-8CDW6YTSPK',\r\n};\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.firestore();\r\nexport const provider = new firebase.auth.GoogleAuthProvider().setCustomParameters(\r\n  {\r\n    prompt: 'select_account',\r\n  }\r\n);\r\nexport default firebase;\r\n","import firebase from \"./config/firebase\";\r\nconst db = firebase.firestore();\r\n\r\nexport function dataFromSnapshot(snapshot) {\r\n  if (!snapshot || !snapshot.exists) {\r\n    return undefined;\r\n  }\r\n  const data = snapshot.data();\r\n  for (const prop in data) {\r\n    if (Object.prototype.hasOwnProperty.call(data, prop)) {\r\n      if (data[prop] instanceof firebase.firestore.Timestamp) {\r\n        data[prop] = data[prop].toDate();\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    ...data,\r\n    id: snapshot.id,\r\n  };\r\n}\r\n\r\nexport function fetchFeedbackFromFirestore(\r\n  filter,\r\n  institutionId,\r\n  limit,\r\n  lastDocSnapshot = null\r\n) {\r\n  let feedbackRef = db\r\n    .collection(\"feedback\")\r\n    .where(\"institutionId\", \"==\", institutionId)\r\n    .orderBy(\"date\")\r\n    .startAfter(lastDocSnapshot)\r\n    .limit(limit);\r\n\r\n  switch (filter) {\r\n    case \"report\":\r\n      return feedbackRef.where(\"type\", \"==\", \"Incident\");\r\n    case \"feedback\":\r\n      return feedbackRef.where(\"type\", \"==\", \"Feedback\");\r\n    case \"bug\":\r\n      return feedbackRef.where(\"type\", \"==\", \"Bug\");\r\n    default:\r\n      return feedbackRef;\r\n  }\r\n}\r\n\r\nexport function setUserProfileData(user, isAdmin = true) {\r\n  return db\r\n    .collection(\"users\")\r\n    .doc(user.uid)\r\n    .set({\r\n      displayName: user.displayName,\r\n      email: user.email,\r\n      photoURL: user.photoURL || null,\r\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n}\r\n\r\nexport function getInstitutionByEmployee(email) {\r\n  return db\r\n    .collection(\"institutions\")\r\n    .where(\"domain\", \"==\", email.split(\"@\")[1])\r\n    .where(\"verifiedAdministrators\", \"array-contains\", email);\r\n}\r\n\r\n// update admin profile data\r\nexport function setAdminProfileData(user) {\r\n  return db\r\n    .collection(\"users\")\r\n    .doc(user.uid)\r\n    .set({\r\n      displayName: user.displayName,\r\n      email: user.email,\r\n      photoURL: user.photoURL || null,\r\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n      isAdministrator: true,\r\n    });\r\n}\r\nexport function addInstitutionToAdmin(adminId, instId) {\r\n  const batch = db.batch();\r\n  const profileRef = db.collection(\"users\").doc(adminId);\r\n  batch.update(profileRef, { institution: instId });\r\n  const instRef = db.collection(\"institutions\").doc(instId);\r\n  batch.update(instRef, {\r\n    approvedAdmins: firebase.firestore.FieldValue.arrayUnion(adminId),\r\n  });\r\n  return batch.commit();\r\n}\r\n\r\nexport function getAdminProfile(userId) {\r\n  return db.collection(\"users\").doc(userId);\r\n}\r\n\r\nexport function updateAdminPhotoURL(newURL) {\r\n  const user = firebase.auth().currentUser;\r\n  return db.collection(\"users\").doc(user.uid).update({ photoURL: newURL });\r\n}\r\n\r\nexport function updateInstitutionFirestore(institutionId, item) {\r\n  return db.collection(\"institutions\").doc(institutionId).update(item);\r\n}\r\n\r\nexport function updateInstitutionLogo(instId, fileURL) {\r\n  return db.collection(\"institutions\").doc(instId).update({\r\n    photoURL: fileURL,\r\n  });\r\n}\r\n\r\n// export function getFeedbackListenerQuery(institutionId) {\r\n//   return db\r\n//     .collection('feedback')\r\n//     .where('institutionId', '==', institutionId)\r\n//     .where('type', '==', 'Feedback')\r\n//     .orderBy('time');\r\n// }\r\n\r\nexport function getTerm(termID) {\r\n  return db.collection(\"terms\").doc(termID);\r\n}\r\n\r\nexport function getTerms(termIDs) {\r\n  return db\r\n    .collection(\"terms\")\r\n    .where(firebase.firestore.FieldPath.documentId(), \"in\", termIDs);\r\n}\r\n\r\nexport function getCourse(courseID) {\r\n  return db.collection(\"courses\").doc(courseID);\r\n}\r\nexport function getCourses(courseIDs) {\r\n  return db\r\n    .collection(\"courses_test\")\r\n    .where(firebase.firestore.FieldPath.documentId(), \"in\", courseIDs);\r\n}\r\n\r\nexport function getCoursesByName(names, institutionID) {\r\n  return db\r\n    .collection(\"courses_test\")\r\n    .where(\"institutionId\", \"==\", institutionID)\r\n    .where(\"name\", \"in\", names);\r\n}\r\n\r\nexport function addCourse(course) {\r\n  return db.collection(\"courses_test\").add(course);\r\n}\r\n\r\nexport async function addCourses(courses) {\r\n  const batchArray = [];\r\n  batchArray.push(db.batch());\r\n  var opCounter = 0;\r\n  var btIndex = 0;\r\n  courses.forEach((course) => {\r\n    if (opCounter === 498) {\r\n      opCounter = 0;\r\n      btIndex += 1;\r\n      batchArray.push(db.batch());\r\n    }\r\n    opCounter += 1;\r\n    const docRef = db.collection(\"courses_test\").doc();\r\n    batchArray[btIndex].set(docRef, course);\r\n  });\r\n  batchArray.forEach(async (batch) => await batch.commit());\r\n  return;\r\n}\r\n\r\nexport function updateTerm(termID, term) {\r\n  return db.collection(\"terms\").doc(termID).update(term);\r\n}\r\n\r\nexport function getFeedbacksByInstitution(institutionID) {\r\n  return db\r\n    .collection(\"feedback_test\")\r\n    .where(\"institutionId\", \"==\", institutionID)\r\n    .where(\"status\", \"==\", 0);\r\n}\r\n\r\nexport function updateFeedback(feedbackID, feedback) {\r\n  return db.collection(\"feedback_test\").doc(feedbackID).update(feedback);\r\n}\r\n\r\n\r\nexport function getInstitutionDocRef(instId) {\r\n  return db.collection(\"institutions\").doc(instId);\r\n}\r\n\r\nexport function getUserProfileDocRef(userId) {\r\n  return db.collection(\"users\").doc(userId);\r\n}\r\n\r\nexport function getUsersByEmail(email){\r\n  return db.collection(\"users\").where(\"email\",\"==\",email);\r\n}\r\n\r\nexport function getUserByUid(uid) {\r\n  return db.collection(\"users\").doc(uid);\r\n}\r\n\r\nexport function getTutorAppDocRef(appId) {\r\n  return db.collection(\"tutorapps\").doc(appId);\r\n}\r\n\r\nexport function getIncidentDocRef(incidentId) {\r\n  return db.collection(\"incident_test\").doc(incidentId);\r\n}\r\n\r\nexport function getIncidentsByInstitution(institutionId) {\r\n  return db\r\n    .collection(\"incident_test\")\r\n    .where(\"institutionId\", \"==\", institutionId)\r\n    .where(\"status\", \"==\", 0);\r\n}\r\n\r\nexport function updateTutorappFirestore(appId, updates) {\r\n  return db.collection(\"tutorapp_test\").doc(appId).update(updates);\r\n}\r\n\r\nexport function updateIncidentFirestore(incidentId, updates) {\r\n  return db.collection(\"incident_test\").doc(incidentId).update(updates);\r\n}\r\n\r\n// querys + lists\r\nexport function fetchTutorAppsByIdQuery(\r\n  {\r\n    idType, // institutionId, departmentId, courseId\r\n    boolOp, // ==  != < <= => > array-contains  array-contains-any    in   not-in\r\n    idValue,\r\n  },\r\n  status = -1, // 0 pending    1 accepted    2 rejected\r\n  lastDocSnapshot = null,\r\n  limit = 25\r\n) {\r\n  const validIdTypes = [\r\n    \"institutionId\",\r\n    \"departmentId\", // TODO: DATE-TIME RANGE\r\n    \"courseId\",\r\n    \"userId\",\r\n  ];\r\n  const validBoolOps = [\r\n    \"<\",\r\n    \"<=\",\r\n    \">=\",\r\n    \">\",\r\n    \"==\",\r\n    \"!=\",\r\n    \"array-contains\",\r\n    \"array-contains-any\",\r\n    \"in\",\r\n    \"not-in\",\r\n  ];\r\n  if (\r\n    !validIdTypes.includes(idType) ||\r\n    !validBoolOps.includes(boolOp) ||\r\n    idValue < -1\r\n  ) {\r\n    return Promise.reject({\r\n      code: \"invalid-args\",\r\n      message: \"The value you provided is invalid\",\r\n    });\r\n  }\r\n  const tutorappsQueryRef = db\r\n    .collection(\"application\")\r\n    .where(idType, boolOp, idValue)\r\n    .orderBy(\"time\")\r\n    .startAfter(lastDocSnapshot)\r\n    .limit(limit);\r\n\r\n  switch (status) {\r\n    case 0:\r\n    case \"pending\":\r\n      return tutorappsQueryRef.where(\"status\", \"<=\", 1);\r\n    case 1:\r\n    case \"accepted\":\r\n      return tutorappsQueryRef.where(\"status\", \"<=\", 2);\r\n    case 2:\r\n    case \"rejected\":\r\n      return tutorappsQueryRef.where(\"status\", \"<=\", 3);\r\n    default:\r\n      return tutorappsQueryRef;\r\n  }\r\n}\r\n\r\nexport function fetchInstitutionTutorApps(\r\n  filter,\r\n  institutionId,\r\n  limit = 25,\r\n) {\r\n  let tutorappsQueryRef = db\r\n    .collection(\"tutorapp_test\")\r\n    .where(\"institutionId\", \"==\", institutionId)\r\n    .limit(limit);\r\n\r\n  switch (filter) {\r\n    case 0:\r\n    case \"pending\":\r\n      return tutorappsQueryRef.where(\"status\", \"==\", 0);\r\n    case 1:\r\n    case \"accepted\":\r\n      return tutorappsQueryRef.where(\"status\", \"==\", 1);\r\n    case 2:\r\n    case \"rejected\":\r\n      return tutorappsQueryRef.where(\"status\", \"==\", 2);\r\n    default:\r\n      return tutorappsQueryRef;\r\n  }\r\n}\r\nexport async function addUserToCourse(courseId,userId) {\r\n  let courseRef = db.collection('courses').doc(courseId);\r\n  return await courseRef.set(\r\n    {\r\n      users: firebase.firestore.FieldValue.arrayUnion(userId),\r\n    },\r\n    { merge: true }\r\n  );\r\n}\r\nexport async function updateUserProfile(patch,userId) {\r\n  try {\r\n    return await db.collection('users').doc(userId).update(patch);\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function fetchCourseTutorApps(instId, courseId, status = 0) {}\r\n\r\nexport function fetchUserTutorApps() {}\r\n","import firebase from \"./config/firebase\";\r\nimport { updateInstitutionFirestore } from \"./firestoreService\";\r\n\r\nexport function uploadToFirebaseStorage(usecase, file, id = null) {\r\n  const validUsecases = [\"userprofile\", \"instlogo\",\"instcover\", \"tutorapp\"];\r\n  if (!validUsecases.includes(usecase)) {\r\n    return Promise.reject({\r\n      code: \"invalid-args\",\r\n      message: \"Invalid command\",\r\n    });\r\n  }\r\n  let root = \"\";\r\n  let path = \"\";\r\n  let target = \"\";\r\n  switch (usecase) {\r\n    case \"userprofile\":\r\n      root = \"users\";\r\n      path = firebase.auth().currentUser.uid ?? null;\r\n      target = \"profile/img\";\r\n      break;\r\n    case \"instlogo\":\r\n      root = \"institutions\";\r\n      path = id;\r\n      target = \"logo/img\";\r\n      break;\r\n    case \"instcover\":\r\n      root = \"institutions\";\r\n      path = id;\r\n      target = \"cover/img\";\r\n      break;\r\n    case \"tutorapp\":\r\n      root = \"application\";\r\n      path = id;\r\n      target = \"transcript/pdf\";\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  if (!root || !path || !target) {\r\n    return Promise.reject({ code: \"invalid-args\", message: \"Invalid command\" });\r\n  }\r\n\r\n  let metadata = {\r\n    customMetadata: {\r\n      usecase: usecase,\r\n    },\r\n  };\r\n\r\n  return firebase\r\n    .storage()\r\n    .ref(`${root}/${path}/${target}`)\r\n    .put(file, metadata)\r\n    .then((uploadTaskSnapshot) => {\r\n      console.log(\r\n        \"----------------------- storageService.js --------------------------\"\r\n      );\r\n      const size = uploadTaskSnapshot.metadata.size;\r\n      const mimeType = uploadTaskSnapshot.metadata.contentType;\r\n      const timeCreated = uploadTaskSnapshot.metadata.timeCreated;\r\n      console.log(`  size: ${size}`);\r\n      console.log(`  mimeType: ${mimeType}`);\r\n      console.log(\r\n        `  timeCreated: ${timeCreated}    ${new Date(\r\n          timeCreated\r\n        )}    ${new Date(timeCreated).toLocaleString()}`\r\n      );\r\n      if (usecase === \"instlogo\") {\r\n        uploadTaskSnapshot.ref.getDownloadURL().then((url) => {\r\n          updateInstitutionFirestore(id, { logoURL: url }).then(() => {\r\n            console.log(\"update logo success\");\r\n          });\r\n          sessionStorage.setItem(\"logoURL\", url);\r\n        });\r\n      }else if(usecase===\"instcover\"){\r\n        uploadTaskSnapshot.ref.getDownloadURL().then((url) => {\r\n          updateInstitutionFirestore(id, { coverPhotoURL: url }).then(() => {\r\n            console.log(\"update cover photo success\");\r\n          });\r\n          sessionStorage.setItem(\"coverPhoto\", url);\r\n        });\r\n      }\r\n    });\r\n}\r\n\r\nexport function deleteFromFirebaseStorage(filename, targetId) {\r\n  const userUid = firebase.auth().currentUser.uid;\r\n  const storageRef = firebase.storage().ref();\r\n  const photoRef = storageRef.child(`${userUid}/user_images/${filename}`);\r\n  return photoRef.delete();\r\n}\r\n\r\nexport async function loadPicture(institutionId) {\r\n  const src = await firebase\r\n    .storage()\r\n    .ref(`institutions/${institutionId}/logo/img`)\r\n    .getDownloadURL();\r\n  return src;\r\n}\r\n","// \t\t\t\tconstants\r\nexport const LOADSETTING = \"LOADSETTING\";\r\nexport const SETLOGO = \"SETLOGO\";\r\n\r\nexport function setLogo(url) {\r\n  return {\r\n    type: SETLOGO,\r\n    payload: url,\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  id: null,\r\n  name: null,\r\n  logosrc: null,\r\n  location: null,\r\n  academicAgreement: null,\r\n  endUserAgreement:null,\r\n};\r\n\r\nexport function institutionReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n\tcase LOADSETTING:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tacademicAgreement:payload.academicAgreement,\r\n\t\t\tendUserAgreement:payload.endUserAgreement,\r\n\t\t}\r\n    case SETLOGO:\r\n      return {\r\n        ...state,\r\n        logosrc: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  asyncActionStart,\r\n  asyncActionFinish,\r\n  asyncActionError,\r\n} from \"../../app/async/asyncReducer\";\r\nimport { uploadToFirebaseStorage } from \"../../app/firestore/storageService\";\r\nimport {\r\n  updateInstitutionFirestore,\r\n  getInstitutionDocRef,\r\n  dataFromSnapshot,\r\n} from \"../../app/firestore/firestoreService\";\r\nimport { LOADSETTING } from \"./institutionReducer\";\r\n\r\nexport function uploadLogo(file) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      let optId = sessionStorage.getItem(\"institutionId\");\r\n      uploadToFirebaseStorage(\"instlogo\", file, optId);\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError({ type: \"uploadLogo\", msg: error }));\r\n    }\r\n  };\r\n}\r\n\r\nexport function uploadCover(file) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      let optId = sessionStorage.getItem(\"institutionId\");\r\n      uploadToFirebaseStorage(\"instcover\", file, optId);\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError({ type: \"uploadCover\", msg: error }));\r\n    }\r\n  };\r\n}\r\n\r\nexport function uploadEndUser(text) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      let optId = sessionStorage.getItem(\"institutionId\");\r\n      updateInstitutionFirestore(optId, { \"policies.endUserAgreement\": text });\r\n      dispatch(asyncActionFinish());\r\n      dispatch(getPolicies());\r\n    } catch (error) {\r\n      dispatch(asyncActionError({ type: \"uploadEndUser\", msg: error }));\r\n    }\r\n  };\r\n}\r\nexport function uploadAcademic(text) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      let optId = sessionStorage.getItem(\"institutionId\");\r\n      updateInstitutionFirestore(optId, {\r\n        \"policies.academicIntegrityAgreement\": text,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      dispatch(getPolicies());\r\n    } catch (error) {\r\n      dispatch(asyncActionError({ type: \"uploadAcademic\", msg: error }));\r\n    }\r\n  };\r\n}\r\n\r\nexport function getPolicies() {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      let instId = sessionStorage.getItem(\"institutionId\");\r\n      getInstitutionDocRef(instId)\r\n        .get()\r\n        .then((doc) => {\r\n          const institution = dataFromSnapshot(doc);\r\n          dispatch({\r\n            type: LOADSETTING,\r\n            payload: {\r\n              academicAgreement:\r\n                institution.policies.academicIntegrityAgreement,\r\n              endUserAgreement: institution.policies.endUserAgreement,\r\n            },\r\n          });\r\n          dispatch(asyncActionFinish());\r\n        });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({ type: \"getPolicies\", msg: error }));\r\n    }\r\n  };\r\n}\r\n","import React,{useEffect} from \"react\";\r\nimport { useDispatch,useSelector } from \"react-redux\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport DashboardFeatureCard from \"../../app/common/dashboard/DashboardFeatureCard\";\r\nimport { openModal } from \"../../app/common/modals/modalReducer\";\r\nimport {getPolicies} from \"./settingsAction\";\r\n\r\nexport default function InstitutionSettingsPage() {\r\n  const dispatch = useDispatch();\r\n  const {academicAgreement,endUserAgreement}=useSelector((state)=>state.institution);\r\n  useEffect(() => {\r\n    dispatch(getPolicies());\r\n    return () => {};\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className=\"pagescontent\">\r\n      <Grid verticalAlign=\"middle\" textAlign=\"center\" container stackable>\r\n        <Grid.Row>\r\n          <Grid.Column width={4}>\r\n            <DashboardFeatureCard\r\n              title=\"Institution Logo\"\r\n              icon=\"address card\"\r\n              onClick={() =>\r\n                dispatch(\r\n                  openModal({\r\n                    modalCategory: \"EditSettingsModal\",\r\n                    modalProps: {\r\n                      usecase: \"instlogo\",\r\n                    },\r\n                  })\r\n                )\r\n              }\r\n              color=\"green\"\r\n            />\r\n          </Grid.Column>\r\n          <Grid.Column width={4}>\r\n            <DashboardFeatureCard\r\n              title=\"Institution Cover Photo\"\r\n              icon=\"picture\"\r\n              onClick={() =>\r\n                dispatch(\r\n                  openModal({\r\n                    modalCategory: \"EditSettingsModal\",\r\n                    modalProps: {\r\n                      usecase: \"instcover\",\r\n                    },\r\n                  })\r\n                )\r\n              }\r\n              color=\"red\"\r\n            />\r\n          </Grid.Column>\r\n          <Grid.Column width={4}>\r\n            <DashboardFeatureCard\r\n              title=\"Academic Integrity Policy\"\r\n              icon=\"graduation cap\"\r\n              onClick={() =>\r\n                dispatch(\r\n                  openModal({\r\n                    modalCategory: \"EditSettingsModal\",\r\n                    modalProps: {\r\n                      usecase: \"academicintegrity\",\r\n                      data:academicAgreement,\r\n                    }\r\n                  })\r\n                )\r\n              }\r\n              color=\"blue\"\r\n            />\r\n          </Grid.Column>\r\n          <Grid.Column width={4}>\r\n            <DashboardFeatureCard\r\n              title=\"End User Agreement\"\r\n              icon=\"handshake outline\"\r\n              onClick={() =>\r\n                dispatch(\r\n                  openModal({\r\n                    modalCategory: \"EditSettingsModal\",\r\n                    modalProps: {\r\n                      usecase: \"enduseragreement\",\r\n                      data:endUserAgreement,\r\n                    },\r\n                  })\r\n                )\r\n              }\r\n              color=\"yellow\"\r\n            />\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Header, Icon } from 'semantic-ui-react';\r\n\r\nexport default function UserProfilePage() {\r\n  return (\r\n    <div className=\"pagescontent\">\r\n      <Header as='h2' textAlign='center'>\r\n        <Icon size='big' name='user circle outline' />\r\n        {sessionStorage.getItem('userName')}\r\n      </Header>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Container, Image,Header } from \"semantic-ui-react\";\r\n\r\nexport default function DashboardHome() {\r\n  return (\r\n    <div className=\"pagescontent\">\r\n      <Container>\r\n        <Header as=\"h1\" textAlign=\"center\">Manage Your SCuLi With Few Clicks</Header>\r\n\r\n        <Image\r\n          src={sessionStorage.getItem(\"coverURL\")}\r\n          size=\"huge\"\r\n          centered\r\n        ></Image>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","export const CHECK_CRED = 'CHECK_CRED';\r\nexport const LOGIN_USER = 'LOGIN_USER';\r\nexport const INIT_PROFILE = 'INIT_PROFILE';\r\nexport const USER_INIT = 'USER_INIT';\r\nexport const LOGOUT_USER = 'LOGOUT_USER';\r\nexport const SET_INSTI=\"SET_INSTITUTION\";\r\nexport const SETLOGO=\"SETLOGO\";","import {\r\n  setUserProfileData,\r\n  getInstitutionByEmployee,\r\n  dataFromSnapshot,\r\n} from \"./firestoreService\";\r\nimport firebase from \"./config/firebase\";\r\n\r\nexport function firebaseObjectToArray(snapshot) {\r\n  if (snapshot) {\r\n    return Object.entries(snapshot).map((e) =>\r\n      Object.assign({}, e[1], { id: e[0] })\r\n    );\r\n  }\r\n}\r\n\r\nexport function signInWithEmail(creds) {\r\n  return firebase\r\n    .auth()\r\n    .signInWithEmailAndPassword(creds.email, creds.password);\r\n}\r\n\r\nexport function signOutFirebase() {\r\n  return firebase.auth().signOut();\r\n}\r\n\r\nexport async function socialLogin(selectedProvider, name) {\r\n  let provider;\r\n  if (selectedProvider === \"facebook\") {\r\n    provider = new firebase.auth.FacebookAuthProvider();\r\n  }\r\n  if (selectedProvider === \"google\") {\r\n    provider = new firebase.auth.GoogleAuthProvider();\r\n  }\r\n  const usercred = await firebase.auth().signInWithPopup(provider);\r\n  if (usercred?.additionalUserInfo?.isNewUser) {\r\n    setUserProfileData(usercred.user);\r\n  }\r\n  if (usercred?.additionalUserInfo?.profile.email) {\r\n    var snapshot = await getInstitutionByEmployee(\r\n      usercred.additionalUserInfo.profile.email      \r\n    ).get();\r\n    if (snapshot.size !== 1) return Promise.reject(\"name or email not match\");\r\n    const institutions=[];\r\n    snapshot.forEach((doc) => {\r\n      institutions.push(dataFromSnapshot(doc));\r\n    });\r\n\r\n      return Promise.resolve({institution:institutions[0],user:{id:usercred.user.uid,displayName:usercred.user.displayName}});\r\n  } else {\r\n    return Promise.reject(\"name or email not match\");\r\n  }\r\n}\r\n\r\nexport function checkAuth(){\r\n  if(firebase.auth().currentUser){\r\n    return true;\r\n  }else{\r\n    return false;\r\n  }\r\n}","import {\r\n  USER_INIT,\r\n  INIT_PROFILE,\r\n  LOGIN_USER,\r\n  LOGOUT_USER,\r\n  CHECK_CRED,\r\n  SET_INSTI,\r\n} from \"./authConstants\";\r\nimport firebase from \"firebase/app\";\r\nimport {\r\n  dataFromSnapshot,\r\n  getUserProfileDocRef,\r\n} from \"../../app/firestore/firestoreService\";\r\nimport {signOutFirebase} from \"../../app/firestore/firebaseService\";\r\n\r\nexport function checkCred() {\r\n  return {\r\n    type: CHECK_CRED,\r\n    payload: null,\r\n  };\r\n}\r\n\r\nexport function loginUser() {\r\n  return {\r\n    type: LOGIN_USER,\r\n  };\r\n}\r\n\r\nexport function profileInit(profileData) {\r\n  return {\r\n    type: INIT_PROFILE,\r\n    payload: profileData,\r\n  };\r\n}\r\n\r\nexport function institutionInit(institution) {\r\n  return {\r\n    type: SET_INSTI,\r\n    payload: institution,\r\n  };\r\n}\r\n\r\nexport function userInitialized() {\r\n  return {\r\n    type: USER_INIT,\r\n    payload: null,\r\n  };\r\n}\r\n\r\nexport function logoutUser() {\r\n  signOutFirebase();\r\n  sessionStorage.removeItem(\"login\");\r\n  return {\r\n    type: LOGOUT_USER,\r\n  };\r\n}\r\n\r\nexport function listenAuthState() {\r\n  return function (dispatch) {\r\n    return firebase.auth().onAuthStateChanged((user) => {\r\n      if (user && user.uid && user.email && user.displayName) {\r\n        const profileRef = getUserProfileDocRef(user.uid);\r\n        profileRef.onSnapshot((snapshot) => {\r\n          if (snapshot && snapshot.exists) {\r\n            const profile = dataFromSnapshot(snapshot);\r\n            dispatch(profileInit(profile));\r\n            dispatch(loginUser());\r\n          }\r\n        });\r\n      }\r\n      if (!user) {\r\n\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function setAuthPersistence(val) {\r\n  if ([\"local\", \"session\", \"none\"].includes(val)) {\r\n    firebase\r\n      .auth()\r\n      .setPersistence(val)\r\n      .then(() => console.log(\"  Set Persistence to: \" + val))\r\n      .catch((err) => console.log(err));\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport {\r\n  Button,\r\n  Container,\r\n  Divider,\r\n  Dropdown,\r\n  Icon,\r\n  Image,\r\n  Menu,\r\n} from \"semantic-ui-react\";\r\nimport { logoutUser } from \"../../../features/auth/authActions\";\r\n\r\nexport default function DashboardHeader() {\r\n  const dispatch = useDispatch();\r\n  function HeaderActions() {\r\n    return (\r\n      <>\r\n        <Menu.Item position=\"right\" style={{ marginLeft: 12 }}>\r\n          <Icon size=\"big\" name=\"user circle outline\" />\r\n          <Dropdown\r\n            pointing=\"top right\"\r\n            text={sessionStorage.getItem(\"userName\")}\r\n          >\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item\r\n                text=\"Profile\"\r\n                icon=\"user\"\r\n                as={Link}\r\n                to=\"/app/profile\"\r\n              />\r\n              <Divider />\r\n              <Dropdown.Item\r\n                text=\"Sign out\"\r\n                icon=\"sign-out\"\r\n                // as={Link}\r\n                // to='/login'\r\n                as={Button}\r\n                onClick={() => {\r\n                  dispatch(logoutUser());\r\n                }}\r\n              />\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </Menu.Item>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu inverted fixed=\"top\">\r\n        <Container>\r\n          <Menu.Item as={Link} to=\"/app/dashboard\" header>\r\n            <Image\r\n              src={sessionStorage.getItem(\"logoURL\")}\r\n              circular\r\n              size=\"mini\"\r\n              style={{ marginRight: 6 }}\r\n            ></Image>\r\n          </Menu.Item>\r\n          <Menu.Item\r\n            as={NavLink}\r\n            to=\"/app/settings\"\r\n            name=\"Institution Settings\"\r\n          />\r\n          <Menu.Item as={NavLink} to=\"/app/courses\" name=\"Courses\" />\r\n          <Menu.Item as={NavLink} to=\"/app/tutor-apps\" name=\"Tutor Apps\" />\r\n          <Menu.Item\r\n            as={NavLink}\r\n            to=\"/app/reported-users\"\r\n            name=\"Reported Users\"\r\n          />\r\n          <Menu.Item as={NavLink} to=\"/app/feedbacks\" name=\"Feedbacks\" />\r\n          <HeaderActions />\r\n        </Container>\r\n      </Menu>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport DashboardHeader from \"./DashboardHeader\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nexport default function DashboardPage({ children }) {\r\n  const { logout } = useSelector((state) => state.auth);\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    logout && history.push(\"/login\");\r\n    return () => {};\r\n  }, [logout,history]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          height: \"100vh\",\r\n          paddingTop: \"0em\",\r\n        }}\r\n      >\r\n        <div className=\"dashboard-header\">\r\n          <DashboardHeader />\r\n        </div>\r\n        <div className=\"dashboard-content\">{children}</div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","export const LOAD_TERM = \"LOAD_TERM\";\r\nexport const SELECT_TERM = \"SELECT_TERM\";\r\nexport const SEARCH_CHANGE = \"SEARCH_CHANGE\";\r\nexport const DELETE_COURSE = \"DELETE_COURSE\";\r\nexport const GET_TERMS = \"GET_TERMS\";\r\nexport const ADD_COURSE = \"ADDCOURSE\";\r\n\r\nexport const UPLOAD_TERM=\"UPLOAD_TERM\";\r\nexport const UPLOAD_COURSE=\"UPLOAD_COURSE\";\r\n","import {\r\n  LOAD_TERM,\r\n  SELECT_TERM,\r\n  ADD_COURSE,\r\n  SEARCH_CHANGE,\r\n  UPLOAD_COURSE,\r\n  UPLOAD_TERM,\r\n} from \"./courseManageConstants\";\r\nimport {\r\n  dataFromSnapshot,\r\n  getCourses,\r\n  getInstitutionDocRef,\r\n  getTerms as getTermsfromDatabase,\r\n  updateTerm,\r\n  addCourse as addCoursetoDatabase,\r\n  addCourses as addCoursestoDatabase,\r\n  getCoursesByName,\r\n} from \"../../app/firestore/firestoreService\";\r\nimport {\r\n  asyncActionStart,\r\n  asyncActionFinish,\r\n  asyncActionError,\r\n} from \"../../app/async/asyncReducer\";\r\n\r\n\r\nexport function getTerms(institutionID) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      getInstitutionDocRef(institutionID)\r\n        .get()\r\n        .then((doc) => {\r\n          const institution = doc.data();\r\n          const curtermid = institution.currentTerm;\r\n          const termIds = [\r\n            ...institution.pastTerms,\r\n            curtermid,\r\n            ...institution.futureTerms,\r\n          ];\r\n          getTermsfromDatabase(termIds)\r\n            .get()\r\n            .then((snapshot) => {\r\n              const terms = [];\r\n              snapshot.forEach((doc) => {\r\n                terms.push(dataFromSnapshot(doc));\r\n              });\r\n              const payload = {\r\n                terms: terms,\r\n                selectedTerm: curtermid,\r\n              };\r\n              dispatch({ type: LOAD_TERM, payload: payload });\r\n              dispatch(\r\n                selectTerm(\r\n                  curtermid,\r\n                  terms.find((term) => term.id === curtermid)\r\n                )\r\n              );\r\n              dispatch(asyncActionFinish());\r\n            });\r\n        });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"getTerms\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function selectTerm(termid, term) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      getCourses(term.courses)\r\n        .get()\r\n        .then((snapshot) => {\r\n          const courses = [];\r\n          snapshot.forEach((doc) => {\r\n            courses.push(dataFromSnapshot(doc));\r\n          });\r\n          const payload = {\r\n            selectedTerm: termid,\r\n            courses: courses,\r\n          };\r\n          dispatch({ type: SELECT_TERM, payload: payload });\r\n          dispatch({ type: ADD_COURSE, payload: false });\r\n          dispatch(asyncActionFinish());\r\n        });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: SELECT_TERM,\r\n        payload: { selectedTerm: termid, courses: [] },\r\n      });\r\n      dispatch(asyncActionError({type:\"selectTerm\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function searchCourse(results, searchValue, termid, term) {\r\n  return function (dispatch) {\r\n    if (searchValue !== \"\") {\r\n      const payload = {\r\n        courses: results,\r\n        searchValue: searchValue,\r\n      };\r\n      dispatch({ type: SEARCH_CHANGE, payload: payload });\r\n    } else {\r\n      dispatch(selectTerm(termid, term));\r\n    }\r\n  };\r\n}\r\n\r\nexport function deleteCourse(courseid, termid, term) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionError());\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      const courses = term.courses.filter((courseId) => courseId !== courseid);\r\n      updateTerm(termid, { courses: courses }).then(() => {\r\n        dispatch(asyncActionFinish());\r\n        dispatch(selectTerm(termid, term));\r\n      });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"deleteCourse\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function addCourse() {\r\n  return function (dispatch) {\r\n    dispatch({ type: ADD_COURSE, payload: true });\r\n  };\r\n}\r\n\r\nexport function addCourseSubmit(\r\n  name,\r\n  shortName,\r\n  description,\r\n  termid,\r\n  term\r\n) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    dispatch(asyncActionError());\r\n    try {\r\n      addCoursetoDatabase({\r\n        name: name,\r\n        courseShortName: shortName,\r\n        description: description,\r\n      }).then((doc) => {\r\n        term.courses.push(doc.id);\r\n        debugger;\r\n        updateTerm(termid, { courses: term.courses }).then(() => {\r\n          dispatch({ type: ADD_COURSE, payload: false });\r\n          dispatch(selectTerm(termid, term));\r\n          dispatch(asyncActionFinish());\r\n        });\r\n      });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"addCourseSubmit\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function parseAlCourseJSON(institutionID,courseData) {\r\n  const alCourses = JSON.parse(courseData);\r\n  return alCourses.map((course) => {\r\n    return {\r\n      name: course.label,\r\n      shortName: course.value,\r\n      institutionId: institutionID,\r\n    };\r\n  });\r\n}\r\n\r\nexport function parseTermCourseJSON(termData) {\r\n  return JSON.parse(termData);\r\n}\r\n\r\nexport function uploadAlCourses(alCoursesFile) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      var alCourses = [];\r\n      var readeralCourses = new FileReader();\r\n      readeralCourses.onload = (e) => {\r\n        alCourses = parseAlCourseJSON(e.target.result);\r\n        addCoursestoDatabase(alCourses).then(() => {\r\n          dispatch(asyncActionFinish());\r\n          dispatch({ type: UPLOAD_COURSE, payload: alCourses.length });\r\n        });\r\n      };\r\n      readeralCourses.readAsText(alCoursesFile);\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\nexport function uploadTermCourses(institutionID,termFile, selectedTerm) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      var termCourses = [];\r\n      const readertermCourses = new FileReader();\r\n      readertermCourses.onload = (e) => {\r\n        termCourses = parseTermCourseJSON(e.target.result);\r\n\r\n        getCoursesByName(termCourses, institutionID)\r\n          .get()\r\n          .then((snapshot) => {\r\n            const coursesId = [];\r\n            snapshot.forEach((doc) => {\r\n              coursesId.push(dataFromSnapshot(doc).id);\r\n            });\r\n            updateTerm(selectedTerm, { courses: coursesId }).then(() => {\r\n              dispatch({ type: UPLOAD_TERM, payload: termCourses.length });\r\n              dispatch(asyncActionFinish());\r\n            });\r\n          });\r\n      };\r\n      readertermCourses.readAsText(termFile);\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { List, Placeholder, Header,Message,Icon } from \"semantic-ui-react\";\r\nimport { selectTerm } from \"./courseManageActions\";\r\n\r\nexport default function TermList() {\r\n  const { terms, selectedTerm } = useSelector((state) => state.course);\r\n  const { loading } = useSelector((state) => state.async);\r\n  const asyncError = useSelector((state) => state.async.error);\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <>\r\n      <Header as=\"h3\">Terms</Header>\r\n      {loading ? (\r\n        <Placeholder>\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n        </Placeholder>\r\n      ) : (\r\n        <List divided selection>\r\n          {terms &&\r\n            terms.map((term) => (\r\n              <List.Item\r\n                key={term.id}\r\n                onClick={() => dispatch(selectTerm(term.id, term))}\r\n                active={term.id === selectedTerm}\r\n              >\r\n                <List.Content>{term.name}</List.Content>\r\n              </List.Item>\r\n            ))}\r\n        </List>\r\n        \r\n      )}\r\n      {asyncError&&asyncError.type === \"addCourseSubmit\" && (\r\n        <Message attached=\"bottom\" warning>\r\n          <Icon name=\"info\" />\r\n          {asyncError.msg}\r\n        </Message>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, List } from \"semantic-ui-react\";\r\nimport { deleteCourse } from \"./courseManageActions\";\r\n\r\nexport default function CourseListItem({ course }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const { selectedTerm, terms } = useSelector((state) => state.course);\r\n  return (\r\n    <List.Item>\r\n      <List.Content floated=\"right\">\r\n        <Button\r\n          onClick={() =>\r\n            dispatch(\r\n              deleteCourse(\r\n                course.id,\r\n                selectedTerm,\r\n                terms.find((term) => term.id === selectedTerm)\r\n              )\r\n            )\r\n          }\r\n        >\r\n          Delete\r\n        </Button>\r\n      </List.Content>\r\n      <List.Content>{course[\"name\"]}</List.Content>\r\n    </List.Item>\r\n  );\r\n}\r\n","import React,{useState} from \"react\";\r\nimport CourseListItem from \"./CourseListItem\";\r\nimport { List, Placeholder, Pagination,Divider,Message,Icon } from \"semantic-ui-react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst numOnePage=10;\r\n\r\nexport default function CourseList() {\r\n  const { courses } = useSelector((state) => state.course);\r\n  const { loading } = useSelector((state) => state.async);\r\n  const asyncError = useSelector((state) => state.async.error);\r\n  const [activePage,setactivePage]=useState(1);\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <Placeholder>\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n        </Placeholder>\r\n      ) : (\r\n        <>\r\n          <List divided verticalAlign=\"middle\">\r\n              {\r\n                courses&&courses.slice(numOnePage*(activePage-1),numOnePage*activePage).map((course) => (\r\n                  <CourseListItem course={course} key={course[\"id\"]} />\r\n                ))\r\n              }\r\n          </List>\r\n          <Divider/>\r\n          <Pagination\r\n            boundaryRange={0}\r\n            defaultActivePage={1}\r\n            ellipsisItem={null}\r\n            firstItem={null}\r\n            lastItem={null}\r\n            siblingRange={4}\r\n            totalPages={courses?Math.ceil(courses.length/numOnePage):1}\r\n            onPageChange={(e,{activePage})=>setactivePage(activePage)}\r\n          />\r\n            {asyncError&&asyncError.type === \"deleteCourse\" && (\r\n        <Message attached=\"bottom\" warning>\r\n          <Icon name=\"info\" />\r\n          {asyncError.msg}\r\n        </Message>\r\n      )}\r\n          )\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Accordion, Button, Icon, Message } from \"semantic-ui-react\";\r\nimport { addCourseSubmit } from \"./courseManageActions\";\r\nimport { useFormik } from \"formik\";\r\nimport { Form } from \"semantic-ui-react\";\r\nimport { addCourse } from \"./courseManageActions\";\r\n\r\nexport default function AddCourseForm() {\r\n  const dispatch = useDispatch();\r\n  const { selectedTerm, terms, isaddCourse } = useSelector(\r\n    (state) => state.course\r\n  );\r\n  const asyncError = useSelector((state) => state.async.error);\r\n  const [isExpanded, setExpanded] = useState(false);\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: \"\",\r\n      shortName: \"\",\r\n      description: \"\",\r\n    },\r\n    onSubmit: (values) => {\r\n      dispatch(\r\n        addCourseSubmit(\r\n          values.name,\r\n          values.shortName,\r\n          values.description,\r\n          selectedTerm,\r\n          terms.find((term) => term.id === selectedTerm)\r\n        )\r\n      );\r\n    },\r\n  });\r\n  return (\r\n    <Accordion>\r\n      <Accordion.Title\r\n        active={isExpanded}\r\n        onClick={() => {\r\n          isExpanded ? setExpanded(false) : setExpanded(true);\r\n        }}\r\n      >\r\n        <Icon name=\"dropdown\" />\r\n        Add a course\r\n      </Accordion.Title>\r\n      <Accordion.Content active={isExpanded}>\r\n        <Button onClick={() => dispatch(addCourse())}>Add</Button>\r\n        {isaddCourse && (\r\n          <Form>\r\n            <label htmlFor=\"courseName\">Course name</label>\r\n            <Form.Field\r\n              placeholder=\"Intro to Cultural Anthropology\"\r\n              name=\"name\"\r\n              control=\"input\"\r\n              value={formik.values.name}\r\n              onChange={formik.handleChange}\r\n            />\r\n            <label htmlFor=\"shortName\">Short name</label>\r\n            <Form.Field\r\n              name=\"shortName\"\r\n              control=\"input\"\r\n              placeholder=\"ANTH 3\"\r\n              value={formik.values.shortName}\r\n              onChange={formik.handleChange}\r\n            />\r\n            <label htmlFor=\"description\">Course description</label>\r\n            <Form.Field\r\n              control=\"textarea\"\r\n              name=\"description\"\r\n              value={formik.values.description}\r\n              onChange={formik.handleChange}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              onClick={() => {\r\n                dispatch(\r\n                  addCourseSubmit(\r\n                    formik.values.name,\r\n                    formik.values.shortName,\r\n                    formik.values.description,\r\n                    selectedTerm,\r\n                    terms.find((term) => term.id === selectedTerm)\r\n                  )\r\n                );\r\n              }}\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n        )}\r\n        {asyncError&&asyncError.type === \"addCourseSubmit\" && (\r\n          <Message attached=\"bottom\" warning>\r\n            <Icon name=\"info\" />\r\n            {asyncError.msg}\r\n          </Message>\r\n        )}\r\n      </Accordion.Content>\r\n    </Accordion>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Search} from \"semantic-ui-react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {searchCourse} from './courseManageActions';\r\n\r\n\r\nexport default function CourseSearchBar() {\r\n  const {courses,searchValue,selectedTerm,terms} = useSelector((state) => state.course);\r\n  const dispatch = useDispatch();\r\n  const handleSearchChange = (e, data) => {\r\n    //debugger; // eslint-disable-line no-debugger\r\n    if (data.value.length === 0) {\r\n      dispatch(searchCourse([],data.value,selectedTerm,terms.find((term)=>term.id===selectedTerm)));\r\n    }\r\n\r\n    const re = new RegExp(data.value);\r\n    const isMatch = (result) => re.test(result.name.toLowerCase());\r\n    dispatch(searchCourse(courses.filter(isMatch),data.value,selectedTerm));\r\n  };\r\n\r\n  return (\r\n    <Search\r\n      onSearchChange={handleSearchChange}\r\n      value={searchValue}\r\n      showNoResults={false}\r\n    />\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Icon, Label, Form, Accordion } from \"semantic-ui-react\";\r\nimport { uploadAlCourses, uploadTermCourses } from \"./courseManageActions\";\r\n\r\nexport default function UploadCoursesForm() {\r\n  const dispatch = useDispatch();\r\n  const { loading } = useSelector((state) => state.async);\r\n  const { selectedTerm } = useSelector((state) => state.course);\r\n  const [alCoursesFile, setalCoursesFile] = useState(\"\");\r\n  const [isExpanded, setExpanded] = useState(false);\r\n  const [termFile, settermFile] = useState(\"\");\r\n  const institutionID = sessionStorage.getItem(\"institutionId\");\r\n\r\n  return (\r\n    <Accordion>\r\n      <Accordion.Title\r\n        active={isExpanded}\r\n        onClick={() => {\r\n          isExpanded ? setExpanded(false) : setExpanded(true);\r\n        }}\r\n      >\r\n        <Icon name=\"dropdown\" />\r\n        Upload courses data\r\n      </Accordion.Title>\r\n      <Accordion.Content active={isExpanded}>\r\n        <Form>\r\n          <Label pointing=\"below\">\r\n            upload all courses data of your institution\r\n          </Label>\r\n\r\n          <Form.Group>\r\n            <Form.Input\r\n              width=\"10\"\r\n              type=\"file\"\r\n              onChange={(e) => {\r\n                setalCoursesFile(e.target.files[0]);\r\n              }}\r\n            />\r\n\r\n            <Form.Button\r\n              width=\"4\"\r\n              type=\"submit\"\r\n              loading={loading}\r\n              onClick={() => {\r\n                dispatch(uploadAlCourses(alCoursesFile));\r\n              }}\r\n            >\r\n              Submit\r\n            </Form.Button>\r\n          </Form.Group>\r\n\r\n          <Label pointing=\"below\">upload courses names in this term</Label>\r\n          <Form.Group>\r\n            <Form.Input\r\n              width=\"10\"\r\n              type=\"file\"\r\n              onChange={(e) => settermFile(e.target.files[0])}\r\n            />\r\n            <Form.Button\r\n              width=\"4\"\r\n              type=\"submit\"\r\n              loading={loading}\r\n              onClick={() =>\r\n                dispatch(uploadTermCourses(institutionID,termFile, selectedTerm))\r\n              }\r\n            >\r\n              Submit\r\n            </Form.Button>\r\n          </Form.Group>\r\n        </Form>\r\n      </Accordion.Content>\r\n    </Accordion>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport { Grid, Segment } from \"semantic-ui-react\";\r\nimport TermsList from \"./TermsList\";\r\nimport CourseList from \"./CourseList\";\r\nimport AddCourseForm from \"./AddCourseForm\";\r\nimport { getTerms } from \"./courseManageActions\";\r\nimport CourseSearchBar from \"./CourseSearchBar\";\r\nimport UploadCoursesForm from \"./UploadCoursesForm\";\r\n\r\nexport default function ManageCoursePage() {\r\n  const dispatch = useDispatch();\r\n  const institutionID = sessionStorage.getItem(\"institutionId\");\r\n  useEffect(() => {\r\n    dispatch(getTerms(institutionID));\r\n    return () => {};\r\n  }, [dispatch, institutionID]);\r\n  return (\r\n    <div className=\"pagescontent\">\r\n      <Segment>\r\n        <Grid columns={3}>\r\n          <Grid.Row>\r\n            <Grid.Column width={4} style={{ margin: 100 }}>\r\n              <Segment>\r\n                <TermsList />\r\n              </Segment>\r\n\r\n              <Segment color=\"blue\">\r\n                <UploadCoursesForm />\r\n              </Segment>\r\n            </Grid.Column>\r\n            <Grid.Column width={7}>\r\n              <CourseSearchBar />\r\n              <Segment color=\"blue\" size=\"large\">\r\n                <CourseList />\r\n              </Segment>\r\n              <Segment>\r\n                <AddCourseForm />\r\n              </Segment>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n      </Segment>\r\n    </div>\r\n  );\r\n}\r\n","export const LOAD_FEEDBACK = \"LOAD_FEEDBACK\";\r\nexport const SHOW_DETAIL = \"FEEDBACK_DETAIL\";\r\nexport const RESOLVE_FEEDBACK = \"RESOLVE_FEEDBACK\";\r\nexport const CHANGE_SORT = \"CHANGE_SORT\";\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  selectedFeedback: null,\r\n  feedbacks: [],\r\n  sortBy: \"time\",\r\n};\r\n\r\nexport default function feedbackReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case LOAD_FEEDBACK:\r\n      return {\r\n        ...state,\r\n        selectedFeedback: payload.selectedFeedback,\r\n        feedbacks: payload.feedbacks,\r\n      };\r\n    case SHOW_DETAIL:\r\n      return {\r\n        ...state,\r\n        selectedFeedback: payload.selectedFeedback,\r\n      };\r\n    case CHANGE_SORT: {\r\n      return {\r\n        ...state,\r\n        sortBy: payload.sortBy,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { LOAD_FEEDBACK, SHOW_DETAIL,CHANGE_SORT} from \"./feedbackReducer\";\r\nimport {\r\n  asyncActionStart,\r\n  asyncActionFinish,\r\n  asyncActionError,\r\n} from \"../../app/async/asyncReducer\";\r\nimport {\r\n  dataFromSnapshot,\r\n  getFeedbacksByInstitution,\r\n  updateFeedback,\r\n  getUserProfileDocRef,\r\n} from \"../../app/firestore/firestoreService\";\r\n\r\nexport function loadFeedback(institutionID) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      getFeedbacksByInstitution(institutionID)\r\n        .get()\r\n        .then((snapshot) => {\r\n          const feedbacks = [];\r\n          snapshot.forEach((doc) => feedbacks.push(dataFromSnapshot(doc)));\r\n          const payload = {\r\n            selectedFeedback: null,\r\n            feedbacks: feedbacks,\r\n          };\r\n          dispatch({ type: LOAD_FEEDBACK, payload: payload });\r\n          dispatch(asyncActionFinish());\r\n          feedbacks.length>0&&dispatch(selectFeedback(feedbacks[0].id,feedbacks[0]))\r\n        });\r\n      \r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"loadFeedback\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function selectFeedback(selectedFeedback, feedback) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      getUserProfileDocRef(feedback.userId)\r\n        .get()\r\n        .then((doc) => {\r\n          const user = dataFromSnapshot(doc);\r\n          feedback.userName = user.displayName;\r\n          const payload = {\r\n            selectedFeedback: selectedFeedback,\r\n            feedback: feedback,\r\n          };\r\n          dispatch({ type: SHOW_DETAIL, payload: payload });\r\n          dispatch(asyncActionFinish());\r\n        });\r\n        \r\n        \r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"selectFeedback\",msg:error}));\r\n    }\r\n\r\n    \r\n  };\r\n}\r\n\r\nexport function solvedFeedback(selectedFeedback) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      updateFeedback(selectedFeedback, {status:1});\r\n      asyncActionFinish();\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"solveFeedback\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\n\r\nexport function changeSort(sortby,feedbacks){\r\n  return function (dispatch) {\r\n    const payload = { sortBy: 0 };\r\n    switch (sortby) {\r\n      case \"time\": {\r\n        feedbacks.sort((a, b) => a.time.getTime() - b.time.getTime());\r\n        payload.sortBy = \"time\";\r\n        break;\r\n      }\r\n      case \"title\": {\r\n        feedbacks.sort((a, b) => {\r\n          return a.title > b.title ? 1 : -1;\r\n        });\r\n        payload.sortBy = \"title\";\r\n        break;\r\n      }\r\n      default: {\r\n        payload.sortBy = \"time\";\r\n        break;\r\n      }\r\n    }\r\n    dispatch({ type: CHANGE_SORT, payload: payload });\r\n  };\r\n}","import { List, Placeholder } from \"semantic-ui-react\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectFeedback } from \"./feedbackAction\";\r\n\r\nexport default function FeedbackList({ feedbacks, selectedFeedback }) {\r\n  const dispatch = useDispatch();\r\n  const { loading } = useSelector((state) => state.async);\r\n  const [activeId, setActiveId] = useState(\"\");\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <Placeholder>\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n          <Placeholder.Line />\r\n        </Placeholder>\r\n      ) : (\r\n        <List divided selection>\r\n          {feedbacks.length !== 0 &&\r\n            feedbacks.map((feedback) => (\r\n              <List.Item\r\n                key={feedback.id}\r\n                active={feedback.id === activeId}\r\n                onClick={() => {\r\n                  setActiveId(feedback.id);\r\n                  dispatch(selectFeedback(feedback.id, feedback));\r\n                }}\r\n              >\r\n                <List.Content>{feedback.title}</List.Content>\r\n              </List.Item>\r\n            ))}\r\n        </List>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Card, Button, Placeholder,Icon } from \"semantic-ui-react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { solvedFeedback } from \"./feedbackAction\";\r\n\r\nexport default function FeedbackDetail({ feedback }) {\r\n  const dispatch = useDispatch();\r\n  const { loading } = useSelector((state) => state.async);\r\n\r\n  return (\r\n    <Card fluid>\r\n      {loading || !feedback ? (\r\n        <>\r\n          <Card.Content>\r\n            <Placeholder.Header length=\"medium\" />\r\n          </Card.Content>\r\n          <Card.Content>\r\n            <Placeholder.Line length=\"medium\" />\r\n          </Card.Content>\r\n          <Card.Content>\r\n            <Placeholder.Line length=\"medium\" />\r\n          </Card.Content>\r\n          <Card.Content>\r\n            <Placeholder.Line length=\"medium\" />\r\n          </Card.Content>\r\n          <Card.Content>\r\n            <Placeholder.Line length=\"medium\" />\r\n          </Card.Content>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Card.Content>\r\n            <Card.Header>{feedback.title}</Card.Header>\r\n            <Card.Meta>title</Card.Meta>\r\n          </Card.Content>\r\n          <Card.Content>\r\n            {feedback.description}\r\n            <Card.Meta>description</Card.Meta>\r\n          </Card.Content>\r\n          <Card.Content>\r\n            {feedback.userName}\r\n            <Card.Meta>user</Card.Meta>\r\n          </Card.Content>\r\n          <Card.Content>\r\n            <Card.Meta>{feedback.time.toString()}</Card.Meta>\r\n          </Card.Content>\r\n          <Card.Content>\r\n            {feedback.status === 0 ? (\r\n              <Button\r\n                basic\r\n                floated=\"right\"\r\n                onClick={() => {\r\n                  feedback.status = 1;\r\n                  dispatch(solvedFeedback(feedback.id, feedback));\r\n                }}\r\n              >\r\n                Solved\r\n              </Button>\r\n            ) : (\r\n              <Button floated=\"right\" basic active=\"false\">\r\n                <Icon name=\"checkmark\" />\r\n              </Button>\r\n            )}\r\n          </Card.Content>\r\n        </>\r\n      )}\r\n    </Card>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Container,\r\n  Grid,\r\n  Segment,\r\n  Header,\r\n  Menu,\r\n  Dropdown,\r\n  Pagination,\r\n  Message,\r\n  Icon,\r\n} from \"semantic-ui-react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport FeedbackList from \"./FeedbackList\";\r\nimport FeedbackDetail from \"./FeedbackDetail\";\r\nimport { loadFeedback, changeSort } from \"./feedbackAction\";\r\n\r\nconst numOnePage = 10;\r\n\r\nexport default function FeedbackPage() {\r\n  const { selectedFeedback, feedbacks, sortBy } = useSelector(\r\n    (state) => state.feedback\r\n  );\r\n  const institutionID = sessionStorage.getItem(\"institutionId\");\r\n  const sortOptions = [\r\n    { key: \"time\", value: \"time\", text: \"last submit time\" },\r\n    { key: \"title\", value: \"title\", text: \"title\" },\r\n  ];\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(loadFeedback(institutionID));\r\n    return () => {};\r\n  }, [dispatch, institutionID]);\r\n  const [activePage, setactivePage] = useState(1);\r\n  const asyncError = useSelector((state) => state.async.error);\r\n\r\n  return (\r\n    <div className=\"pagescontent\">\r\n      <Segment>\r\n        <Container>\r\n          <Header as=\"h2\">manage feedbacks</Header>\r\n\r\n          <Menu attached=\"top\" borderless>\r\n            <Menu.Menu position=\"right\">\r\n              <span>\r\n                sorted by\r\n                <Dropdown\r\n                  inline\r\n                  options={sortOptions}\r\n                  onChange={(e, { value }) =>\r\n                    dispatch(changeSort(value, feedbacks))\r\n                  }\r\n                  selection\r\n                  defaultValue={sortBy}\r\n                />\r\n              </span>\r\n            </Menu.Menu>\r\n          </Menu>\r\n          <Segment>\r\n            <Grid>\r\n              <Grid.Column width={5}>\r\n                <FeedbackList\r\n                  feedbacks={feedbacks.slice(\r\n                    numOnePage * (activePage - 1),\r\n                    numOnePage * activePage\r\n                  )}\r\n                  selectedFeedback={selectedFeedback}\r\n                />\r\n              </Grid.Column>\r\n\r\n              {selectedFeedback && (\r\n                <Grid.Column width={5}>\r\n                  <FeedbackDetail\r\n                    feedback={feedbacks.find(\r\n                      (fb) => fb.id === selectedFeedback\r\n                    )}\r\n                  />\r\n                </Grid.Column>\r\n              )}\r\n            </Grid>\r\n            {asyncError &&\r\n              (asyncError.type === \"loadFeedback\" ||\r\n                asyncError.type === \"selectFeedback\" ||\r\n                asyncError.type === \"solveFeedback\") && (\r\n                <Message attached=\"bottom\" warning>\r\n                  <Icon name=\"info\" />\r\n                  {asyncError.msg}\r\n                </Message>\r\n              )}\r\n          </Segment>\r\n          <Pagination\r\n            attached=\"bottom\"\r\n            boundaryRange={0}\r\n            defaultActivePage={1}\r\n            ellipsisItem={null}\r\n            firstItem={null}\r\n            lastItem={null}\r\n            siblingRange={2}\r\n            totalPages={Math.ceil(feedbacks.length / numOnePage)}\r\n            onPageChange={(e, { activePage }) => setactivePage(activePage)}\r\n          />\r\n        </Container>\r\n      </Segment>\r\n    </div>\r\n  );\r\n}\r\n","// constants\r\n\r\nexport const FETCH_REPORTS = \"FETCH_REPORTS\";\r\nexport const CHANGE_SORT = \"CHANGE_SORT\";\r\nexport const RELOAD = \"RELOAD\";\r\nexport const LOADDRAFT = \"LOADDRAFT\";\r\n\r\n// reducer\r\nconst initialState = {\r\n  reports: [],\r\n  sessionInfo: null,\r\n  sortBy: \"time\",\r\n  reload: 0,\r\n  emailDraft: null,\r\n};\r\n\r\nexport function reportedUsersReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case FETCH_REPORTS:\r\n      return {\r\n        ...state,\r\n        reports: payload.reports,\r\n      };\r\n    case CHANGE_SORT:\r\n      return {\r\n        ...state,\r\n        sortBy: payload.sortBy,\r\n      };\r\n    case RELOAD:\r\n      return {\r\n        ...state,\r\n        reload: state.reload + 1,\r\n      };\r\n    case LOADDRAFT:\r\n      return {\r\n        ...state,\r\n        emailDraft: payload.emailDraft,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../app/async/asyncReducer\";\r\nimport {\r\n  FETCH_REPORTS,\r\n  CHANGE_SORT,\r\n  RELOAD,\r\n  LOADDRAFT,\r\n} from \"./reportedUsersReducer\";\r\n\r\nimport {\r\n  getUserProfileDocRef,\r\n  getIncidentsByInstitution,\r\n  getInstitutionDocRef,\r\n  dataFromSnapshot,\r\n  updateIncidentFirestore,\r\n  updateInstitutionFirestore,\r\n} from \"../../app/firestore/firestoreService\";\r\n\r\nexport function fetchReports(institutionID) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      getIncidentsByInstitution(institutionID)\r\n        .get()\r\n        .then((snapshot) => {\r\n          const incidents = [];\r\n          snapshot.forEach((doc) => {\r\n            const incident = dataFromSnapshot(doc);\r\n            incident.emailSent = false;\r\n            incidents.push(incident);\r\n          });\r\n          const payload = {\r\n            reports: incidents,\r\n          };\r\n          dispatch({ type: FETCH_REPORTS, payload: payload });\r\n          dispatch(asyncActionFinish());\r\n        });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"fetchReports\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function sendEmail(subject, text, officialEmail, incident) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      getUserProfileDocRef(incident.reportedUserId)\r\n        .get()\r\n        .then((doc) => {\r\n          const userdata = dataFromSnapshot(doc);\r\n          fetch(\"/sendEmail\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n              from: officialEmail,\r\n              to: userdata.email,\r\n              subject: subject,\r\n              body: text,\r\n            }),\r\n          })\r\n            .then((response) => {\r\n              response.json();\r\n            })\r\n            .then((data) => {\r\n              dispatch({ type: RELOAD });\r\n              dispatch(asyncActionFinish());\r\n              incident.emailSent = true;\r\n              console.log(\"Success:\", data);\r\n            });\r\n        });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"sendEmail\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function solvedReport(selectedReportID) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      updateIncidentFirestore(selectedReportID, { status: 1 }).then(() => {\r\n        dispatch(asyncActionFinish());\r\n      });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"solvedReport\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function changeSort(sortby, reports) {\r\n  return function (dispatch) {\r\n    const payload = { sortBy: 0 };\r\n    switch (sortby) {\r\n      case \"time\": {\r\n        reports.sort((a, b) => a.time.getTime() - b.time.getTime());\r\n        payload.sortBy = \"time\";\r\n        break;\r\n      }\r\n      case \"nameA\": {\r\n        reports.sort((a, b) => {\r\n          return a.userName > b.userName ? 1 : -1;\r\n        });\r\n        payload.sortBy = \"nameA\";\r\n        break;\r\n      }\r\n      case \"nameB\": {\r\n        reports.sort((a, b) => {\r\n          return a.reportedUserName > b.reportedUserName ? 1 : -1;\r\n        });\r\n        payload.sortBy = \"nameB\";\r\n        break;\r\n      }\r\n      default: {\r\n        payload.sortBy = \"time\";\r\n        break;\r\n      }\r\n    }\r\n    dispatch({ type: CHANGE_SORT, payload: payload });\r\n  };\r\n}\r\n\r\nexport function loadEmailDraft(institutionId) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      getInstitutionDocRef(institutionId)\r\n        .get()\r\n        .then((doc) => {\r\n          const institution = dataFromSnapshot(doc);\r\n          dispatch({\r\n            type: LOADDRAFT,\r\n            payload: {\r\n              emailDraft: institution.emailDraft,\r\n            },\r\n          });\r\n          dispatch(asyncActionFinish());\r\n        });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"loadEmailDraft\",msg:error}));\r\n    }\r\n  };\r\n}\r\n\r\nexport function saveEmailDraft(institutionId, text, subject) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      updateInstitutionFirestore(institutionId, {\r\n        emailDraft: { subject: subject, body: text },\r\n      }).then(() => {\r\n        dispatch({\r\n          type: RELOAD,\r\n        });\r\n        dispatch(asyncActionFinish());\r\n      });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({type:\"saveEmailDraft\",msg:error}));\r\n    }\r\n  };\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  Pagination,\r\n  Grid,\r\n  Accordion,\r\n  Placeholder,\r\n  Divider,\r\n  Header,\r\n  Icon,\r\n  Message\r\n} from \"semantic-ui-react\";\r\nimport { solvedReport } from \"./reportedUserAction\";\r\nimport { openModal } from \"../../app/common/modals/modalReducer\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nconst numOnePage = 6;\r\nconst officialEmail=\"sculink@gmail.com\";\r\n\r\nexport default function ReportedUsersList({ reports, institutionId }) {\r\n  const { reload, emailDraft } = useSelector((state) => state.incident);\r\n  const { loading } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const asyncError = useSelector((state) => state.async.error);\r\n  const [activePage, setactivePage] = useState(1);\r\n  return (\r\n    <>\r\n      <Grid columns={3}>\r\n        {reports\r\n          .slice(numOnePage * (activePage - 1), numOnePage * activePage)\r\n          .map(\r\n            (incident) =>\r\n              incident && (\r\n                <Grid.Column key={incident.id}>\r\n                  <Card>\r\n                    {loading ? (\r\n                      <Placeholder>\r\n                        <Placeholder.Line length=\"medium\" />\r\n                        <Placeholder.Line length=\"medium\" />\r\n                        <Placeholder.Line length=\"medium\" />\r\n                        <Placeholder.Line length=\"medium\" />\r\n                        <Placeholder.Line length=\"medium\" />\r\n                        <Placeholder.Line length=\"medium\" />\r\n                        <Placeholder.Line length=\"medium\" />\r\n                      </Placeholder>\r\n                    ) : (\r\n                      <>\r\n                        <Card.Content>\r\n                          <Card.Header>\r\n                            {incident.reportedUserName}{\" \"}\r\n                          </Card.Header>\r\n                          <Card.Meta>reported user</Card.Meta>\r\n                          {incident.emailSent ? (\r\n                            <Button floated=\"left\" basic active=\"false\">\r\n                              <Icon name=\"checkmark\" />\r\n                            </Button>\r\n                          ) : (\r\n                            <Button\r\n                              basic\r\n                              floated=\"left\"\r\n                              onClick={() => {\r\n                                dispatch(\r\n                                  openModal({\r\n                                    modalCategory: \"SendEmailModal\",\r\n                                    modalProps: {\r\n                                      emailDraft: emailDraft,\r\n                                      incident: incident,\r\n                                      institutionId: institutionId,\r\n                                      officialEmail:officialEmail,\r\n                                    },\r\n                                   \r\n                                  })\r\n                                );\r\n                                console.log(reload);\r\n                              }}\r\n                            >\r\n                              notificate\r\n                            </Button>\r\n                          )}\r\n                        </Card.Content>\r\n\r\n                        <Card.Content>\r\n                          <Card.Header>{incident.userName}</Card.Header>\r\n                          <Card.Meta>submit user</Card.Meta>\r\n                        </Card.Content>\r\n                        <Card.Content>\r\n                          <Accordion\r\n                            as={Card.Content}\r\n                            panels={[\r\n                              {\r\n                                key: incident.id,\r\n                                title: incident.description\r\n                                  .substring(0, 30)\r\n                                  .padEnd(35, \"...\"),\r\n                                content: incident.description,\r\n                              },\r\n                            ]}\r\n                          ></Accordion>\r\n                          <Card.Meta>description</Card.Meta>\r\n                        </Card.Content>\r\n                        <Card.Content>\r\n                          <Card.Meta>{incident.time.toDateString()}</Card.Meta>\r\n                        </Card.Content>\r\n                        <Card.Content>\r\n                          {incident.status === 0 ? (\r\n                            <Button\r\n                              basic\r\n                              floated=\"right\"\r\n                              onClick={() => {\r\n                                incident.status = 1;\r\n                                dispatch(solvedReport(incident.id));\r\n                              }}\r\n                            >\r\n                              Solved\r\n                            </Button>\r\n                          ) : (\r\n                            <Button floated=\"right\" basic active=\"false\">\r\n                              <Icon name=\"checkmark\" />\r\n                            </Button>\r\n                          )}\r\n                        </Card.Content>\r\n                        <Card.Content></Card.Content>\r\n                      </>\r\n                    )}\r\n                  </Card>\r\n                </Grid.Column>\r\n              )\r\n          )}\r\n      </Grid>\r\n      {asyncError&&(asyncError.type === \"addCourseSubmit\" ||asyncError.type === \"fetchReports\")&& (\r\n        <Message attached=\"bottom\" warning>\r\n          <Icon name=\"info\" />\r\n          {asyncError.msg}\r\n        </Message>\r\n      )}\r\n      <Divider horizontal>\r\n        <Header as=\"h4\">pages</Header>\r\n      </Divider>\r\n\r\n      <Pagination\r\n        boundaryRange={0}\r\n        defaultActivePage={1}\r\n        ellipsisItem={null}\r\n        firstItem={null}\r\n        lastItem={null}\r\n        siblingRange={2}\r\n        totalPages={Math.ceil(reports.length / numOnePage)}\r\n        onPageChange={(e, { activePage }) => setactivePage(activePage)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Segment, Menu, Dropdown, Header, Container } from \"semantic-ui-react\";\r\nimport ReportedUsersList from \"./ReportedUsersList\";\r\nimport { fetchReports, changeSort,loadEmailDraft } from \"./reportedUserAction\";\r\n\r\nexport default function ReportedUsersPage() {\r\n  const dispatch = useDispatch();\r\n  const { reports, sortBy } = useSelector((state) => state.incident);\r\n  const institutionId = sessionStorage.getItem(\"institutionId\");\r\n  const sortOptions = [\r\n    { key: \"time\", value: \"time\", text: \"last submit time\" },\r\n    { key: \"nameA\", value: \"nameA\", text: \"user name\" },\r\n    { key: \"nameB\", value: \"nameB\", text: \"reported user name\" },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchReports(institutionId));\r\n    dispatch(loadEmailDraft(institutionId));\r\n    return () => {};\r\n  }, [dispatch,institutionId]);\r\n\r\n  return (\r\n    <div className=\"pagescontent\">\r\n      <Segment>\r\n        <Container>\r\n          <Header as=\"h2\">manage reported users</Header>\r\n          <Menu attached=\"top\" borderless>\r\n            <Menu.Menu position=\"right\">\r\n              <span>\r\n                {\" \"}\r\n                sorted by\r\n                <Dropdown\r\n                  inline\r\n                  options={sortOptions}\r\n                  onChange={(e, { value }) =>\r\n                    dispatch(changeSort(value, reports))\r\n                  }\r\n                  selection\r\n                  defaultValue={sortBy}\r\n                />\r\n              </span>\r\n            </Menu.Menu>\r\n          </Menu>\r\n\r\n          <Segment>\r\n            <ReportedUsersList reports={reports} institutionId={institutionId} />\r\n          </Segment>\r\n        </Container>\r\n      </Segment>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Dimmer,\r\n  Form,\r\n  Grid,\r\n  Header,\r\n  Icon,\r\n  Image,\r\n  Loader,\r\n  Message,\r\n  Segment,\r\n} from \"semantic-ui-react\";\r\nimport {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../app/async/asyncReducer\";\r\nimport { socialLogin } from \"../../app/firestore/firebaseService\";\r\nimport { checkCred } from \"./authActions\";\r\n\r\nexport default function LoginPage({ history }) {\r\n  const dispatch = useDispatch();\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(null);\r\n  const { statusMessage } = useSelector((state) => state.auth);\r\n\r\n  function handleSocialLogin(providerStr) {\r\n    dispatch(asyncActionStart());\r\n    setErrorMsg(null);\r\n    setSubmitting(true);\r\n    dispatch(checkCred());\r\n    socialLogin(providerStr)\r\n      .then((result) => {\r\n        setSubmitting(false);\r\n        sessionStorage.setItem(\"institutionId\", result.institution.id);\r\n        sessionStorage.setItem(\"institutionName\", result.institution.name);\r\n        sessionStorage.setItem(\"logoURL\",result.institution.logoURL);\r\n        sessionStorage.setItem(\"coverURL\",result.institution.coverPhotoURL);\r\n        sessionStorage.setItem(\"userId\", result.user.id);\r\n        sessionStorage.setItem(\"userName\", result.user.displayName);\r\n        sessionStorage.setItem(\"login\", \"true\");\r\n        history.push(\"/app/dashboard\");\r\n        dispatch(asyncActionFinish());\r\n      })\r\n      .catch((err) => {\r\n        setErrorMsg(err);\r\n        setSubmitting(false);\r\n        dispatch(asyncActionError(err));\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dimmer.Dimmable as={Segment} dimmed={true && submitting}>\r\n        <Grid\r\n          textAlign=\"center\"\r\n          style={{ height: \"100vh\" }}\r\n          verticalAlign=\"middle\"\r\n        >\r\n          <Grid.Column style={{ maxWidth: 450 }}>\r\n            <Header as=\"h3\" color=\"teal\" textAlign=\"center\">\r\n              <Image src=\"/assets/logosculi.png\" style={{ width: 300 }} />\r\n              <p>Institutional Login</p>\r\n            </Header>\r\n            <Form size=\"large\">\r\n              <Segment stacked>\r\n                <Form.Button\r\n                  onClick={() => {\r\n                    handleSocialLogin(\"google\");\r\n                  }}\r\n                  icon=\"google\"\r\n                  fluid\r\n                  color=\"google plus\"\r\n                  content=\"Login with Google\"\r\n                />\r\n              </Segment>\r\n            </Form>\r\n            {errorMsg !== null && !submitting && (\r\n              <Message attached=\"bottom\" warning>\r\n                <Icon name=\"info\" />\r\n                {errorMsg}\r\n              </Message>\r\n            )}\r\n          </Grid.Column>\r\n        </Grid>\r\n        <Dimmer active={submitting && statusMessage && true} inverted>\r\n          <Loader inverted>{statusMessage}</Loader>\r\n        </Dimmer>\r\n      </Dimmer.Dimmable>\r\n    </div>\r\n  );\r\n}\r\n","export const LOAD_TUTORAPP = \"LOAD_TUTORAPP\";\r\nexport const SHOW_DETAIL = \"FEEDBACK_DETAIL\";\r\nexport const RESOLVE_TUTORAPP = \"RESOLVE_TUTORAPP\";\r\nexport const CHANGE_SORT = \"CHANGE_SORT\";\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  selectedTutorApp: null,\r\n  tutorapps: [],\r\n  sortBy: \"time\",\r\n};\r\n\r\nexport function tutorAppReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case LOAD_TUTORAPP:\r\n      return {\r\n        ...state,\r\n        selectedTutorApp: payload.selectedTutorApp,\r\n        tutorapps: payload.applications,\r\n      };\r\n    case SHOW_DETAIL:\r\n      return {\r\n        ...state,\r\n        selectedTutorApp: payload.selectedTutorApp,\r\n      };\r\n    case CHANGE_SORT: {\r\n      return {\r\n        ...state,\r\n        sortBy: payload.sortBy,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { LOAD_TUTORAPP, CHANGE_SORT } from \"./tutorAppReducer\";\r\nimport {\r\n  asyncActionStart,\r\n  asyncActionFinish,\r\n  asyncActionError,\r\n} from \"../../app/async/asyncReducer\";\r\nimport {\r\n  dataFromSnapshot,\r\n  fetchInstitutionTutorApps,\r\n  updateTutorappFirestore,\r\n  addUserToCourse,\r\n  updateUserProfile,\r\n  getUserProfileDocRef,\r\n  getCourse,\r\n} from \"../../app/firestore/firestoreService\";\r\n\r\nexport async function loadTutorApps(institutionID, dispatch) {\r\n  dispatch(asyncActionStart());\r\n  try {\r\n    const snapshot = await fetchInstitutionTutorApps(\r\n      0,\r\n      institutionID,\r\n      500\r\n    ).get();\r\n    const applications = [];\r\n    for (const doc of snapshot.docs) {\r\n      const tutorapp = dataFromSnapshot(doc);\r\n      const coursedoc = await getCourse(tutorapp.courseId).get();\r\n      const course = dataFromSnapshot(coursedoc);\r\n      tutorapp.courseName = course.name;\r\n      applications.push(tutorapp);\r\n    }\r\n    const payload = {\r\n      selectedTutorApp: null,\r\n      applications: applications,\r\n    };\r\n    dispatch({ type: LOAD_TUTORAPP, payload: payload });\r\n    dispatch(asyncActionFinish());\r\n    return Promise.resolve();\r\n  } catch (error) {\r\n    dispatch(asyncActionError({ type: \"loadTutorApps\", msg: error }));\r\n    return Promise.reject();\r\n  }\r\n}\r\n\r\nexport function solvedApplications(tutorapp, option) {\r\n  return function (dispatch) {\r\n    dispatch(asyncActionStart());\r\n    try {\r\n      updateTutorappFirestore(tutorapp.id, { status: option }).then(() => {\r\n        if (option === 1) {\r\n          addUserToCourse(tutorapp.courseId, tutorapp.userId).then((result) => {\r\n            getUserProfileDocRef(tutorapp.userId)\r\n              .get()\r\n              .then((doc) => {\r\n                const userProfile = dataFromSnapshot(doc);\r\n                let patch = {\r\n                  courses: {\r\n                    student: userProfile.courses.student,\r\n                    tutor: [...userProfile.courses.tutor, tutorapp.courseId],\r\n                  },\r\n                };\r\n                updateUserProfile(patch, tutorapp.userId).then(() => {\r\n                  loadTutorApps(\r\n                    sessionStorage.getItem(\"institutionId\"),\r\n                    dispatch\r\n                  );\r\n                  asyncActionFinish();\r\n                  dispatch(asyncActionFinish());\r\n                });\r\n              });\r\n          });\r\n        } else {\r\n          asyncActionFinish();\r\n          dispatch(asyncActionFinish());\r\n        }\r\n      });\r\n    } catch (error) {\r\n      dispatch(asyncActionError({ type: \"solvedApplications\", msg: error }));\r\n    }\r\n  };\r\n}\r\n\r\nexport function changeSort(sortby, applications) {\r\n  return function (dispatch) {\r\n    const payload = { sortBy: 0 };\r\n    switch (sortby) {\r\n      case \"time\": {\r\n        applications.sort((a, b) => a.time.getTime() - b.time.getTime());\r\n        payload.sortBy = \"time\";\r\n        break;\r\n      }\r\n      case \"user\": {\r\n        applications.sort((a, b) => {\r\n          return a.userName > b.userName ? 1 : -1;\r\n        });\r\n        payload.sortBy = \"user\";\r\n        break;\r\n      }\r\n      default: {\r\n        payload.sortBy = \"time\";\r\n        break;\r\n      }\r\n    }\r\n    dispatch({ type: CHANGE_SORT, payload: payload });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Button, List, Grid } from \"semantic-ui-react\";\r\nimport { solvedApplications } from \"./tutorAppAction\";\r\n\r\nexport default function TutorApplicationListItem({ tutorapp }) {\r\n  const dispatch=useDispatch();\r\n  return (\r\n    <Grid row={1} columns={5}>\r\n      <Grid.Row>\r\n        <Grid.Column>\r\n          <List link>\r\n            <List.Item>\r\n              <Button\r\n              basic\r\n                href={tutorapp.transcriptURL}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                View Transcript\r\n              </Button>\r\n            </List.Item>\r\n          </List>\r\n        </Grid.Column>\r\n\r\n        <Grid.Column>\r\n          <List.Item>\r\n            <List.Content>{tutorapp.userName}</List.Content>\r\n          </List.Item>\r\n        </Grid.Column>\r\n        <Grid.Column>\r\n          <List.Item>\r\n            <List.Content>{tutorapp.courseName}</List.Content>\r\n          </List.Item>\r\n        </Grid.Column>\r\n        <Grid.Column>\r\n          <List.Item>\r\n            <List.Content>\r\n              <Button\r\n              basic\r\n                onClick={() => {\r\n                  dispatch(solvedApplications(tutorapp,1));\r\n                }}\r\n              >\r\n                Approve\r\n              </Button>\r\n              <Button\r\n              basic\r\n                onClick={() => {\r\n                  dispatch(solvedApplications(tutorapp,2));\r\n                }}\r\n              >\r\n                Reject\r\n              </Button>\r\n            </List.Content>\r\n          </List.Item>\r\n        </Grid.Column>\r\n        <Grid.Column>\r\n          <List.Item>\r\n            <List.Content>{tutorapp.time.toDateString()}</List.Content>\r\n          </List.Item>\r\n        </Grid.Column>\r\n      </Grid.Row>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Divider, Pagination,List } from \"semantic-ui-react\";\r\nimport TutorApplicationListItem from \"./TutorApplicationListItem\";\r\n\r\n\r\nconst numOnePage = 10;\r\nexport default function TutorApplicationList({ tutorapps }) {\r\n  const [activePage, setactivePage] = useState(1);\r\n\r\n  return (\r\n    <>\r\n      <List divided verticalAlign=\"middle\">\r\n        {tutorapps &&\r\n          tutorapps\r\n            .slice(numOnePage * (activePage - 1), numOnePage * activePage)\r\n            .map((application) => (\r\n              <TutorApplicationListItem tutorapp={application} key={application[\"id\"]} />\r\n            ))}\r\n      </List>\r\n      <Divider />\r\n\r\n      <Pagination\r\n        boundaryRange={0}\r\n        defaultActivePage={1}\r\n        ellipsisItem={null}\r\n        firstItem={null}\r\n        lastItem={null}\r\n        siblingRange={4}\r\n        //totalPages={courses?Math.ceil(courses.length/numOnePage):1}\r\n        totalPages={3}\r\n        onPageChange={(e, { activePage }) => setactivePage(activePage)}\r\n      />\r\n    </>\r\n  );\r\n}","import React, { useEffect } from \"react\";\r\nimport { Grid, Segment,Header,Menu,Dropdown } from \"semantic-ui-react\";\r\nimport TutorApplicationList from \"./TutorApplicationList\";\r\nimport { loadTutorApps,changeSort } from \"./tutorAppAction\";\r\nimport { useSelector,useDispatch } from \"react-redux\";\r\n\r\n\r\n\r\nexport default function TutorApplicationsPage() {\r\n  const institutionID = sessionStorage.getItem(\"institutionId\");\r\n  const dispatch=useDispatch();\r\n  const sortOptions = [\r\n    { key: \"time\", value: \"time\", text: \"last submit time\" },\r\n    { key: \"user\", value: \"user\", text: \"user\" },\r\n  ];\r\n  const {  tutorapps, sortBy } = useSelector(\r\n    (state) => state.tutorApp\r\n  );\r\n  useEffect(() => {\r\n    loadTutorApps(institutionID,dispatch);\r\n    return () => {};\r\n  }, [dispatch, institutionID]);\r\n  return (\r\n    <div className=\"pagescontent\">\r\n      <Header as=\"h2\">manage tutor applications</Header>\r\n\r\n      <Menu attached=\"top\" borderless>\r\n        <Menu.Menu position=\"right\">\r\n          <span>\r\n            sorted by\r\n            <Dropdown\r\n              inline\r\n              options={sortOptions}\r\n              onChange={(e, { value }) =>\r\n                dispatch(changeSort(value, tutorapps))\r\n              }\r\n              selection\r\n              defaultValue={sortBy}\r\n            />\r\n          </span>\r\n        </Menu.Menu>\r\n      </Menu>\r\n      <Segment>\r\n        <Grid>\r\n          <Grid.Row>\r\n            <Grid.Column>\r\n              <Segment color=\"blue\" size=\"large\">\r\n                <TutorApplicationList tutorapps={tutorapps}/>\r\n              </Segment>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n      </Segment>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport AuthGuardedRoute from '../common/AuthGuardedRoute';\r\nimport InstitutionSettingsPage from '../../features/institution-settings/InstitutionSettingsPage';\r\nimport UserProfilePage from '../../features/user-profile/UserProfilePage';\r\nimport DashboardHome from '../common/dashboard/DashboardHome';\r\nimport DashboardPage from '../common/dashboard/DashboardPage';\r\nimport './styles.css';\r\nimport ManageCoursePage from '../../features/manage-courses/ManageCoursePage';\r\nimport FeedbackPage from '../../features/feedback/FeedbackPage';\r\nimport ReportedUsersPage from '../../features/reported-users/ReportedUsersPage';\r\nimport LoginPage from '../../features/auth/LoginPage';\r\nimport TutorApplicationsPage from '../../features/tutor-applications/TutorApplicationsPage';\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <AuthGuardedRoute path='/app'>\r\n        <DashboardPage>\r\n          <Route exact path='/app/dashboard' component={DashboardHome} />\r\n\r\n          <Route exact path='/app/profile' component={UserProfilePage} />\r\n\r\n          <Route exact path='/app/courses' component={ManageCoursePage} />\r\n\r\n          <Route\r\n            exact\r\n            path='/app/tutor-apps'\r\n            component={TutorApplicationsPage}\r\n          />\r\n\r\n          <Route exact path='/app/feedbacks' component={FeedbackPage} />\r\n          <Route\r\n            exact\r\n            path='/app/reported-users'\r\n            component={ReportedUsersPage}\r\n          />\r\n\r\n          <Route\r\n            exact\r\n            path='/app/settings'\r\n            component={InstitutionSettingsPage}\r\n          />\r\n        </DashboardPage>\r\n        <Redirect from='/app' to='/app/dashboard' />\r\n      </AuthGuardedRoute>\r\n      <Route path='/login' component={LoginPage} />\r\n    </>\r\n  );\r\n}\r\nexport default App;\r\n","import {\r\n  LOAD_TERM,\r\n  SELECT_TERM,\r\n  SEARCH_CHANGE,\r\n  ADD_COURSE,\r\n  UPLOAD_TERM,\r\n  UPLOAD_COURSE,\r\n} from \"./courseManageConstants\";\r\n\r\nconst initialState = {\r\n  selectedTerm: null,\r\n  terms: null,\r\n  courses: null,\r\n  loading: false,\r\n  isaddCourse: false,\r\n  searchValue: \"\",\r\n  alCoursesInfo: \"\",\r\n  termCoursesInfo: \"\",\r\n};\r\n\r\nexport default function courseManageReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case LOAD_TERM:\r\n      return {\r\n        ...state,\r\n        selectedTerm: payload.selectedTerm,\r\n        terms: payload.terms,\r\n      };\r\n    case SELECT_TERM:\r\n      return {\r\n        ...state,\r\n        selectedTerm: payload.selectedTerm,\r\n        courses: payload.courses,\r\n        searchValue: \"\",\r\n      };\r\n    case ADD_COURSE:\r\n      return {\r\n        ...state,\r\n        isaddCourse: payload,\r\n      };\r\n    case SEARCH_CHANGE:\r\n      return {\r\n        ...state,\r\n        courses: payload.courses,\r\n        searchValue: payload.searchValue,\r\n      };\r\n    case UPLOAD_COURSE:\r\n      return {\r\n        ...state,\r\n        alCoursesInfo: payload,\r\n      };\r\n    case UPLOAD_TERM:\r\n      return {\r\n        ...state,\r\n        termCoursesInfo: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  LOGIN_USER,\r\n  LOGOUT_USER,\r\n  USER_INIT,\r\n  INIT_PROFILE,\r\n  CHECK_CRED,\r\n  SET_INSTI,\r\n} from \"./authConstants\";\r\n\r\nconst initialState = {\r\n  authenticated: false,\r\n  currentUser: null,\r\n  userProfile: null,\r\n  initialized: false,\r\n  currentInstitution: null,\r\n  statusMessage: null,\r\n  logout:false,\r\n};\r\n\r\nexport default function authReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case CHECK_CRED:\r\n      return {\r\n        ...state,\r\n        statusMessage: \"Authenticating...\",\r\n      };\r\n    case LOGIN_USER:\r\n      return {\r\n        ...state,\r\n        logout:false,\r\n      };\r\n    case INIT_PROFILE:\r\n      if (payload) {\r\n        return {\r\n          ...state,\r\n          userProfile: {\r\n            uid: state.uid,\r\n            displayName: payload.displayName,\r\n            email: payload.email,\r\n            // metadata: payload.metadata ? {\r\n            //   creationTime: payload.metadata?.creationTime ?? undefined, // string\r\n            //   lastSignInTime: payload.metadata?.lastSignInTime ?? undefined, // string,\r\n            // } : null,\r\n            isAdministrator: payload.isAdministrator === true,\r\n            institution: {\r\n              id: payload.institution?.id,\r\n              name: payload.institution?.name,\r\n              photoURL: payload.institution?.photoURL,\r\n            },\r\n          },\r\n          initialized: true,\r\n        };\r\n      }\r\n      return state;\r\n    case USER_INIT:\r\n      return {\r\n        ...state,\r\n        initialized: true,\r\n        statusMessage: null,\r\n      };\r\n    case LOGOUT_USER:\r\n      return {\r\n        ...state,\r\n        logout:true,\r\n      };\r\n    case SET_INSTI:\r\n      return {\r\n        ...state,\r\n        currentInstitution: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const SET_FILE = 'SET_FILE';\r\nexport const FILE_UPLOAD = 'FILE_UPLOAD';\r\nexport const UPLOAD_PROGRESS = 'UPLOAD_PROGRESS';\r\nexport const UPLOAD_COMPLETE = 'UPLOAD_COMPLETE';\r\nexport const UPLOAD_ERROR = 'UPLOAD_ERROR';\r\n\r\n\r\nexport function setFile(file) {\r\n  return {\r\n    type: SET_FILE,\r\n    payload: file\r\n  };\r\n}\r\n\r\nexport function uploadFile(file, usecase) {\r\n  return file && usecase\r\n    ? {\r\n      type: FILE_UPLOAD,\r\n      payload: file,\r\n    }\r\n    : uploadError({\r\n      code: 'null-args',\r\n      message: 'That file does not exist',\r\n    });\r\n}\r\n\r\nexport function uploadProgress(val) {\r\n  return {\r\n    type: UPLOAD_PROGRESS,\r\n    payload: val,\r\n  };\r\n}\r\n\r\nexport function uploadComplete(downloadURL) {\r\n  return {\r\n    type: UPLOAD_COMPLETE,\r\n    payload: downloadURL,\r\n  };\r\n}\r\n\r\nexport function uploadError(err) {\r\n  return {\r\n    type: UPLOAD_ERROR,\r\n    payload: err,\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  file: null,\r\n  usecase: null,\r\n  loading: false,\r\n  progress: 0,\r\n  error: null,\r\n  downloadURL: null,\r\n};\r\n\r\nexport function storageReducer(state = initialState, { type, payload }) {\r\n\r\n  switch (type) {\r\n    case SET_FILE:\r\n      if (payload && payload.file && payload.usecase) {\r\n        return {\r\n          ...state,\r\n          file: payload.file,\r\n          usecase: payload.usecase,\r\n        };\r\n      }\r\n      return initialState;\r\n    case FILE_UPLOAD:\r\n      if (payload && payload.file && payload.usecase) {\r\n        return {\r\n          ...state,\r\n          file: payload.file,\r\n          usecase: payload.usecase,\r\n          loading: true,\r\n          progress: 0,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        ...payload,\r\n        loading: false,\r\n        error: {\r\n          code: 'invalid-args',\r\n          message: 'No file selected',\r\n        }\r\n      };\r\n    case UPLOAD_PROGRESS:\r\n      return {\r\n        ...state,\r\n        progress: payload?.progress,\r\n      };\r\n    case UPLOAD_COMPLETE:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        downloadURL: payload?.downloadURL,\r\n      };\r\n    case UPLOAD_ERROR:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: payload?.error,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport asyncReducer from \"../async/asyncReducer\";\r\nimport courseManageReducer from \"../../features/manage-courses/courseManageReducer\";\r\nimport feedbackReducer from \"../../features/feedback/feedbackReducer\";\r\nimport authReducer from \"../../features/auth/authReducer\";\r\nimport modalReducer from \"../common/modals/modalReducer\";\r\nimport { storageReducer } from \"./storageReducer\";\r\nimport { reportedUsersReducer } from \"../../features/reported-users/reportedUsersReducer\";\r\nimport { institutionReducer } from \"../../features/institution-settings/institutionReducer\";\r\nimport { tutorAppReducer } from \"../../features/tutor-applications/tutorAppReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  async: asyncReducer,\r\n  modal: modalReducer,\r\n  auth: authReducer,\r\n  storage: storageReducer,\r\n\r\n  institution: institutionReducer,\r\n\r\n  feedback: feedbackReducer,\r\n  incident: reportedUsersReducer,\r\n  course: courseManageReducer,\r\n  tutorApp: tutorAppReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Button, Modal } from 'semantic-ui-react';\r\nimport { closeModal } from './modalReducer';\r\n\r\nexport default function ModalWrapper({\r\n  children,\r\n  header,\r\n  initValue,\r\n  handleClose,\r\n  handleSubmit,\r\n  props\r\n}) {\r\n  const dispatch = useDispatch();\r\n\r\n  function defaultContent() {\r\n    return (\r\n      <>\r\n        <Modal.Header>\r\n          {'Confirm'}\r\n        </Modal.Header>\r\n        <Modal.Content>\r\n          <p>Press OK to continue</p>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button\r\n            basic\r\n            inverted\r\n            content='OK'\r\n            // onClick={dispatch(handleSubmit)}\r\n            onClick={dispatch(closeModal())}\r\n          />\r\n        </Modal.Actions>\r\n      </>\r\n    );\r\n  }\r\n  return (\r\n    <Modal open={true}\r\n      className={props?.className ?? 'edit-settings-modal'}\r\n      size={props?.size ?? 'large'}\r\n      onClose={(res) => dispatch(closeModal({ res }))}\r\n      {...props}>\r\n      {children || defaultContent()}\r\n    </Modal>\r\n  );\r\n}\r\n","import { useFormik } from 'formik';\r\nimport React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Button, Form, Modal } from 'semantic-ui-react';\r\nimport {uploadAcademic} from \"../settingsAction\";\r\n\r\nexport default function EditAcademicIntegrityPolicyModalContent({ startWith }) {\r\n\tconst dispatch = useDispatch();\r\n\tconst formik = useFormik({\r\n\t\tinitialValues: {\r\n\t\t  academicPolicy: startWith,\r\n\t\t},\r\n\t  });\r\n\t  return (\r\n\t\t<>\r\n\t\t  <Modal.Content scrolling>\r\n\t\t\t<Form className=\"ui form\">\r\n\t\t\t  <Form.Field\r\n\t\t\t\t  control=\"textarea\"\r\n\t\t\t\tname=\"academicPolicy\"\r\n\t\t\t\tvalue={formik.values.academicPolicy}\r\n\t\t\t\tonChange={formik.handleChange}\r\n\t\t\t  />\r\n\t\t\t</Form>\r\n\t\t  </Modal.Content>\r\n\t\t  <Modal.Actions>\r\n\t\t\t<Button.Group>\r\n\t\t\t  <Button\r\n\t\t\t\tcolor=\"teal\"\r\n\t\t\t\tcontent=\"Update\"\r\n\t\t\t\tonClick={() => dispatch(uploadAcademic(formik.values.academicPolicy))}\r\n\t\t\t  />\r\n\t\t\t</Button.Group>\r\n\t\t  </Modal.Actions>\r\n\t\t</>\r\n\t  );\r\n}\r\n","import { useFormik } from \"formik\";\r\nimport React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Button, Form, Modal } from \"semantic-ui-react\";\r\nimport { uploadEndUser } from \"../settingsAction\";\r\n// import * as Yup from 'yup';\r\n\r\nexport default function EditEndUserAgreementPolicyModalContent({ startWith }) {\r\n  const dispatch = useDispatch();\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      enduserPolicy: startWith,\r\n    },\r\n  });\r\n  return (\r\n    <>\r\n      <Modal.Content scrolling>\r\n        <Form className=\"ui form\">\r\n          <Form.Field\r\n\t\t  \tcontrol=\"textarea\"\r\n            name=\"enduserPolicy\"\r\n\t\t\tvalue={formik.values.enduserPolicy}\r\n\t\t\tonChange={formik.handleChange}\r\n          />\r\n        </Form>\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button.Group>\r\n          <Button\r\n            color=\"teal\"\r\n            content=\"Update\"\r\n            onClick={() => dispatch(uploadEndUser(formik.values.enduserPolicy))}\r\n          />\r\n        </Button.Group>\r\n      </Modal.Actions>\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { Header, Icon } from 'semantic-ui-react';\r\n\r\nexport default function PhotoWidgetDropzone({ setFile }) {\r\n  const dropzoneStyles = {\r\n    border: 'dashed 3px #eee',\r\n    borderRadius: '5%',\r\n    paddingTop: '30px',\r\n    paddingLeft: '6px',\r\n    paddingRight: '6px',\r\n    textAlign: 'center',\r\n    minWidth: '65%'\r\n  };\r\n\r\n  const dropzoneActive = {\r\n    border: 'dashed 3px green',\r\n  };\r\n\r\n  const onDrop = useCallback(setFile, [setFile]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\r\n\r\n  return (\r\n    <div\r\n      {...getRootProps()}\r\n      style={isDragActive ? { ...dropzoneStyles, ...dropzoneActive } : dropzoneStyles}\r\n    // label={{\r\n    //   as: 'a',\r\n    //   color: 'teal',\r\n    //   content: 'Pick a photo',\r\n    //   icon: 'photo',\r\n    //   ribbon: true\r\n    // }}\r\n    >\r\n      <input {...getInputProps()} />\r\n      <Icon name='upload' size='large' />\r\n      <Header style={{ marginBottom: '1rem' }}\r\n        content='Click or drop a file here' />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {  Grid, Image, Message } from \"semantic-ui-react\";\r\n\r\nimport {\r\n  setFile,\r\n} from \"../../store/storageReducer\";\r\nimport PhotoWidgetDropzone from \"./PhotoWidgetDropzone\";\r\n\r\nexport default function PhotoUploadWidget({ usecase}) {\r\n  const dispatch = useDispatch();\r\n  const { file } = useSelector((state) => state.storage);\r\n\r\n  if (!usecase) {\r\n    return <Message icon=\"info\" content=\"Something went wrong\" />;\r\n  }\r\n\r\n  const useSetFile = (files) => {\r\n    if (!files || files.length === 0) {\r\n      console.log(\" ~~ photo widget dropzone got NULL FILES LIST dropped in\");\r\n      dispatch(setFile(null));\r\n    } else {\r\n      const file = files[0];\r\n      Object.assign(file, {\r\n        preview: URL.createObjectURL(file),\r\n      });\r\n      console.log(\"  PHOTO UPLOAD WIDGET: \");\r\n      console.log(file);\r\n      dispatch(setFile({ file, usecase }));\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <Grid>\r\n        <Grid.Row>\r\n          <PhotoWidgetDropzone setFile={useSetFile} />\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          {file && (\r\n            <Image\r\n              size=\"medium\"\r\n              src={file.preview}\r\n              label={{\r\n                as: \"a\",\r\n                color: \"teal\",\r\n                content: \"Review\",\r\n                icon: \"photo\",\r\n                ribbon: true,\r\n              }}\r\n            />\r\n          )}\r\n        </Grid.Row>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Modal, Button } from \"semantic-ui-react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport PhotoUploadWidget from \"../../../app/common/photos/PhotoUploadWidget\";\r\nimport { uploadLogo } from \"../settingsAction\";\r\n\r\nexport default function EditInstitutionLogoModalContent() {\r\n  const { file } = useSelector((state) => state.storage);\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <>\r\n      <Modal.Content image scrolling>\r\n        <PhotoUploadWidget usecase=\"instlogo\" />\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button.Group>\r\n          <Button\r\n            color=\"teal\"\r\n            content=\"Update\"\r\n            onClick={() => dispatch(uploadLogo(file))}\r\n          />\r\n        </Button.Group>\r\n      </Modal.Actions>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Modal, Button } from \"semantic-ui-react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport PhotoUploadWidget from \"../../../app/common/photos/PhotoUploadWidget\";\r\nimport { uploadCover } from \"../settingsAction\";\r\n\r\nexport default function EditCoverModalContent() {\r\n  const { file } = useSelector((state) => state.storage);\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <>\r\n      <Modal.Content image scrolling>\r\n        <PhotoUploadWidget usecase=\"instcover\" />\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button.Group>\r\n          <Button\r\n            color=\"teal\"\r\n            content=\"Update\"\r\n            onClick={() => dispatch(uploadCover(file))}\r\n          />\r\n        </Button.Group>\r\n      </Modal.Actions>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Button, Modal } from \"semantic-ui-react\";\r\nimport ModalWrapper from \"../../../app/common/modals/ModalWrapper\";\r\nimport EditAcademicIntegrityPolicyModalContent from \"./EditAcademicIntegrityPolicyModalContent\";\r\nimport EditEndUserAgreementPolicyModalContent from \"./EditEndUserAgreementPolicyModalContent\";\r\nimport EditLogoModalContent from \"./EditInstitutionLogoModalContent\";\r\nimport EditCoverModalContent from \"./EditCoverModalContent\";\r\n\r\nexport default function EditSettingsModal({ usecase, data }) {\r\n  const dispatch = useDispatch();\r\n  const title =\r\n    usecase === \"academicintegrity\"\r\n      ? \"Academic Integrity Agreement\"\r\n      : usecase === \"enduseragreement\"\r\n      ? \"End-User Agreement\"\r\n      : usecase === \"instlogo\"\r\n      ? \"Institution Logo\"\r\n      : usecase === \"instcover\"\r\n      ? \"Institution Cover Photo\"\r\n      : \"default placeholder\";\r\n\r\n  return (\r\n    <ModalWrapper\r\n      centered={false}\r\n      className={\"edit-settings-modal\"}\r\n      header={title}\r\n      size=\"large\"\r\n    >\r\n      <Modal.Header>Edit {title}</Modal.Header>\r\n\r\n      {usecase === \"instlogo\" && <EditLogoModalContent startWith={data} />}\r\n      {usecase === \"instcover\" && <EditCoverModalContent startWith={data} />}\r\n      {usecase === \"academicintegrity\" && (\r\n        <EditAcademicIntegrityPolicyModalContent startWith={data} />\r\n      )}\r\n      {usecase === \"enduseragreement\" && (\r\n        <EditEndUserAgreementPolicyModalContent startWith={data} />\r\n      )}\r\n      <Modal.Actions>\r\n        <Button\r\n          onClick={(e) =>\r\n            dispatch({\r\n              event: e.type,\r\n              name: \"onClick\",\r\n              type: \"CLOSE_MODAL\",\r\n            })\r\n          }\r\n          positive\r\n        >\r\n          Close\r\n        </Button>\r\n      </Modal.Actions>\r\n    </ModalWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch,useSelector } from \"react-redux\";\r\nimport { Button, Modal,Form,Icon,Label,Message } from \"semantic-ui-react\";\r\nimport ModalWrapper from \"../../app/common/modals/ModalWrapper\";\r\nimport { closeModal } from \"../../app/common/modals/modalReducer\";\r\nimport { useFormik } from \"formik\";\r\nimport {\r\n  saveEmailDraft,\r\n  sendEmail,\r\n} from \"./reportedUserAction\";\r\n\r\nexport default function SendEmailModal({\r\n  emailDraft,\r\n  incident,\r\n  institutionId,\r\n  officialEmail\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      draftSubject: emailDraft.subject,\r\n      draftText: emailDraft.body,\r\n    },\r\n  });\r\n  const asyncError = useSelector((state) => state.async.error);\r\n\r\n\r\n  return (\r\n    <ModalWrapper\r\n      centered={false}\r\n      header={\"Send Notification Email \"}\r\n      size=\"large\"\r\n    >\r\n      <Modal.Content scrolling>\r\n        <Form>\r\n          <Form.Group widths=\"equal\">\r\n            <Form.Field\r\n              control=\"input\"\r\n              default\r\n              name=\"draftSubject\"\r\n              value={formik.values.draftSubject}\r\n              onChange={formik.handleChange}\r\n              label=\"input subject of email\"\r\n            />\r\n            <Form.Field\r\n              control=\"textarea\"\r\n              default\r\n              name=\"draftText\"\r\n              value={formik.values.draftText}\r\n              onChange={formik.handleChange}\r\n              label=\"input email body\"\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button\r\n            onClick={() => {\r\n              dispatch(saveEmailDraft(institutionId, formik.values.draftText,formik.values.draftSubject));\r\n            }}\r\n          >\r\n            save as draft\r\n          </Button>\r\n          {asyncError&&asyncError.type === \"saveEmailDraft\" && (\r\n        <Label color=\"red\">{asyncError.msg}</Label>\r\n      )}\r\n        </Form>\r\n      </Modal.Content>\r\n\r\n      <Modal.Actions>\r\n        <Button onClick={() => dispatch(closeModal())} negative>\r\n          Close\r\n        </Button>\r\n        {incident.emailSent ? (\r\n          <Button basic active=\"false\">\r\n            <Icon name=\"checkmark\" />\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            basic \r\n            onClick={() => {\r\n              dispatch(\r\n                sendEmail(\r\n                  formik.values.draftSubject,\r\n                  formik.values.draftText,\r\n                  officialEmail,\r\n                  incident\r\n                )\r\n              );\r\n            }}\r\n          >\r\n            Send\r\n          </Button>\r\n        )}\r\n      </Modal.Actions>\r\n      {asyncError&&asyncError.type === \"sendEmail\" && (\r\n        <Message attached=\"bottom\" warning>\r\n          <Icon name=\"info\" />\r\n          {asyncError.msg}\r\n        </Message>\r\n      )}\r\n    </ModalWrapper>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport EditSettingsModal from '../../../features/institution-settings/edit-settings-modal/EditSettingsModal';\r\nimport SendEmailModal from \"../../../features/reported-users/SendEmailModal\";\r\n\r\nexport default function ModalManager() {\r\n  const modalLookup = {\r\n    EditSettingsModal,\r\n    SendEmailModal,\r\n  };\r\n  const { modalCategory, modalProps } = useSelector((state) => state.modal);\r\n  let renderedModal = null;\r\n  if (modalCategory) {\r\n    const ModalComponent = modalLookup[modalCategory];\r\n    renderedModal = <ModalComponent {...modalProps} />;\r\n  }\r\n\r\n  return <span>{renderedModal}</span>;\r\n}\r\n","import { useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nexport default function ScrollToTop() {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]); // dependency, run this function when this value changes\r\n\r\n  return null;\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './app/layout/App';\r\nimport { configureStore } from './app/store/configureStore';\r\nimport ModalManager from './app/common/modals/ModalManager';\r\nimport ScrollToTop from './app/layout/ScrollToTop';\r\n\r\n\r\nconst store = configureStore();\r\nconst rootEl = document.getElementById('root');\r\n\r\n\r\n\r\nfunction render() {\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <ScrollToTop />\r\n        <ModalManager />\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>,\r\n    rootEl\r\n  );\r\n}\r\n\r\nif (module.hot) {\r\n  module.hot.accept('./app/layout/App', function () {\r\n    setTimeout(render);\r\n  });\r\n}\r\n\r\nrender();\r\n\r\n","import { applyMiddleware, createStore } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport rootReducer from './rootReducer';\r\nimport thunk from 'redux-thunk';\r\nimport { listenAuthState } from '../../features/auth/authActions';\r\n\r\nexport function configureStore() {\r\n  const store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)));\r\n  store.dispatch(listenAuthState());\r\n  return store;\r\n}\r\n"],"sourceRoot":""}